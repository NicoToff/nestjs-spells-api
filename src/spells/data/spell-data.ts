import type { CreateSpellDto } from "../entities/create-spell.dto";
import type { SpellTag, AbilityScore, SpellLevel } from "dnd-home-utils";

/* *** TYPESCRIPT SHENANIGANS *** */
// Spells that have the "melee" or "ranged" tag can't have a savingThrow
type SpellTagWithoutSpellAttack = Exclude<SpellTag, "melee" | "ranged">;
type LeanSpellType = Omit<CreateSpellDto, "tags" | "savingThrow">;
type NormalSpellType = LeanSpellType & {
  tags?: SpellTagWithoutSpellAttack[];
  savingThrow?: AbilityScore;
};
type MeleeRangedSpellType = LeanSpellType & {
  tags: ["melee" | "ranged", ...SpellTag[]];
  savingThrow?: never;
};
/* *** *** *** *** *** *** *** *** *** *** */

/* *** HELPER FUNCTIONS AND CONSTANTS *** */
const atkInstead = (type?: "melee" | "ranged") => {
  let atkType = "an";
  if (type != null) {
    atkType = type === "melee" ? "a Melee" : "a Ranged";
  }
  return `You make ${atkType} Attack Roll instead of a Spellcasting Attempt to cast this spell.` as const;
};
const noHalfCover =
  "A creature doesn't benefit from Half-Cover against this spell.";
const beastOnly =
  "**Requirements.** You can affect a beast with an Intelligence of 3 or less that can hear you. The spell fails on any other creature.";

const forEachAboveDo = (lvl: SpellLevel, effect: string) =>
  `For each slot level above ${levelSchoolLabel(lvl)}, ${effect}` as const;

const addTarget = (lvl: SpellLevel) =>
  `${forEachAboveDo(lvl, "you can target one additional creature")}.` as const;

type ToString<N> = N extends number ? `${N}` : N extends string ? N : never;
function levelSchoolLabel(spellLevel: SpellLevel | ToString<SpellLevel>) {
  // prettier-ignore
  switch (spellLevel) {
    case  0:
    case "0": return `Cantrip`;
    case  1:
    case "1": return `1st`;
    case  2:
    case "2": return `2nd`;
    case  3:
    case "3": return `3rd`;
    default:  return `${spellLevel}th`;
  }
}

/* *** *** *** *** *** *** *** *** *** *** */

export const SPELL_DATA: (NormalSpellType | MeleeRangedSpellType)[] = [
  {
    name: "Acid Splash",
    level: 0,
    school: "conjuration",
    castingTime: "Action",
    range: "60 feet",
    area: "5-foot-radius sphere",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor:
      "A bubble of acid materializes around your foe and bursts in a spray.",
    description: ["Each creature takes 1d8 acid damage."],
    damageTypes: ["acid"],
    cantripUpgrade:
      "This spell's damage increases by 1d8 when you reach 5th level (2d8), 10th level (3d8), and 17th level (4d8).",
    savingThrow: "dex",
    sources: ["arcane"],
    group: "Elemental Rudiment",
    tags: ["area"],
  },
  {
    name: "Bang",
    level: 0,
    school: "evocation",
    castingTime: "Action",
    range: "120 feet",
    duration: "Instantaneous",
    components: ["v", "m"],
    material: "a tiny drum",
    flavor: "A loud sound bursts your opponent's ears.",
    description: [
      "A creature takes 1d8 thunder damage and is Deafened until the start of your next turn.",
    ],
    damageTypes: ["thunder"],
    cantripUpgrade:
      "This spell's damage increases by 1d8 when you reach 5th level (2d8), 10th level (3d8), and 17th level (4d8).",
    savingThrow: "con",
    sources: ["bard", "arcane"],
    group: "Elemental Rudiment",
  },
  {
    name: "Blade Ward",
    level: 0,
    school: "abjuration",
    castingTime: "Reaction, taken when an enemy attacks you in Melee",
    range: "Self",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "You snap your fingers, then trace a sigil of warding in the air.",
    description: ["You impose Disadvantage on the triggering Attack."],
    sources: ["arcane"],
    tags: ["debuff"],
  },
  {
    name: "Booming Blade",
    level: 0,
    school: "evocation",
    castingTime: "Action",
    range: "Self",
    duration: "Until the start of your next turn",
    components: ["s", "m"],
    material: "the weapon you use for the Attack Roll",
    flavor: "You channel thunderous energy into your weapon.",
    description: [
      atkInstead("melee"),
      "You deal damage normally, and the target becomes sheathed in booming energy until the start of your next turn. If the target willingly moves before then, it immediately takes 1d8 thunder damage, and the spell ends.",
    ],
    sources: ["arcane"],
    cantripUpgrade:
      "Starting at 5th level, the Melee Attack deals an additional 1d8 thunder damage on a hit and the damage for moving increases to 2d8. These damage rolls increase to 2d8 and 3d8 at 10th level, and to 3d8 and 4d8 at 17th level.",
    tags: ["melee", "debuff"],
    damageTypes: ["thunder"],
    group: "Magic Strike",
  },
  {
    name: "Censure",
    level: 0,
    school: "evocation",
    castingTime: "Action",
    range: "60 feet",
    duration: "Until the start of your next turn",
    components: ["v", "s"],
    flavor: "You warn a creature of dire consequence if it dares to move.",
    description: [
      "If the creature willingly moves before the spell ends, it takes 2d8 radiant damage.",
      "The creature is aware of this effect.",
    ],
    damageTypes: ["radiant"],
    cantripUpgrade:
      "This spell's damage increases by 2d8 when you reach 5th level (4d8), 10th level (6d8), and 17th level (8d8).",
    savingThrow: "wis",
    tags: ["control"],
    group: "Blessed Radiance",
    sources: ["divine"],
  },
  {
    name: "Control Flames",
    level: 0,
    school: "transmutation",
    castingTime: "Action",
    range: "60 feet",
    duration: "Instantaneous",
    components: ["s"],
    flavor: "You control the intensity and shape of fire.",
    description: [
      "Choose a nonmagical flame that fits in a 5-foot cube and affect it in one of the following ways:",
      "- You expand the flame 5 feet in one direction, provided that a combustible is present in the new location.",
      "- You extinguish the flames within the cube.",
      "- You double or halve the area of bright light and dim light cast by the flame, change its color, or both.",
      "- You cause simple shapes to appear within the flames and animate as you like. The shapes last for 1 hour.",
      "If you cast this spell multiple times, you can have up to three of its non-instantaneous effects active at a time, and you can dismiss such an effect as an Action.",
    ],
    group: "Shape Nature",
    sources: ["arcane", "primal"],
  },
  {
    name: "Chill Touch",
    level: 0,
    school: "necromancy",
    castingTime: "Action",
    range: "120 feet",
    duration: "Until the start of your next turn",
    components: ["v"],
    flavor:
      "You create a ghostly, skeletal hand to strangle your opponent with the chill of the grave.",
    description: [
      "The creature takes 1d10 necrotic damage, and it can't regain hit points.",
      "If you hit an undead creature, it also has Disadvantage on Attack Rolls against you.",
    ],
    damageTypes: ["necrotic"],
    cantripUpgrade:
      "This spell's damage increases by 1d10 when you reach 5th level (2d10), 10th level (3d10), and 17th level (4d10).",
    sources: ["arcane", "divine"],
    tags: ["ranged", "debuff"],
    group: "Requiems",
  },
  {
    name: "Druidcraft",
    level: 0,
    school: "divination",
    castingTime: "Action",
    range: "Self",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "Smell the air, feel the wind, listen to the earth...",
    description: [
      "Choose one of the following effect:",
      "- You get a vision of the weather within a 1-mile radius for the next 24 hours.",
      "- You instantly make a flower blossom, a seed pod open, or a leaf bud bloom.",
    ],
    cantripUpgrade:
      "The location of the weather forecast increases to a 5-mile radius when you reach 5th level, 10-mile radius at 10th level, and 100-mile radius at 17th level. The number of plant you can affect increases to two at 5th level, ten at 10th level, and twenty-five at 17th level.",
    sources: ["primal"],
    group: "Shape Nature",
  },
  {
    isPrivate: true,
    name: "Eldritch Blast",
    level: 0,
    school: "evocation",
    castingTime: "Action",
    range: "120 feet",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "A beam of crackling energy streaks toward your foe.",
    description: ["The creature takes 1d10 force damage."],
    damageTypes: ["force"],
    cantripUpgrade:
      "This spell creates one additional beam when you reach 5th level (two beams), 10th level (three beams), and 17th level (four beams).",
    tags: ["ranged"],
    sources: ["warlock"],
  },
  // {
  //   name: "Encode Thoughts",
  // },
  {
    name: "Fire Bolt",
    level: 0,
    school: "evocation",
    castingTime: "Action",
    range: "120 feet",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "You hurl a searing mote of magical fire at your foe.",
    description: [
      "The creature takes 1d12 fire damage.",
      "A flammable object hit by this spell ignites if it isn't being worn or carried.",
    ],
    damageTypes: ["fire"],
    tags: ["ranged"],
    cantripUpgrade:
      "This spell's damage increases by 1d12 when you reach 5th level (2d12), 10th level (3d12), and 17th level (4d12).",
    sources: ["arcane"],
    group: "Elemental Rudiment",
  },
  {
    name: "Green-Flame Blade",
    level: 0,
    school: "evocation",
    castingTime: "Action",
    range: "Self",
    duration: "Instantaneous",
    components: ["v", "m"],
    material: "the weapon you use for the Attack Roll",
    flavor: "You imbue your weapon with green fire.",
    description: [
      atkInstead("melee"),
      "You deal damage normally, and the creature takes 1d8 fire damage. If the creature is within 5 feet of another enemy, that enemy takes fire damage equal to your Spellcasting Ability Modifier.",
    ],
    cantripUpgrade:
      "Starting at 5th level, the Melee Attack deals an additional 1d8 fire damage on a hit and the damage for the secondary target increases to 1d8 + your Spellcasting Ability Modifier. These damage rolls increase to 3d8 and 2d8 at 10th level, and to 4d8 and 3d8 at 17th level.",
    damageTypes: ["fire"],
    tags: ["melee"],
    sources: ["arcane"],
    group: "Magic Strike",
  },
  {
    name: "Guidance",
    level: 0,
    school: "divination",
    castingTime: "Action",
    components: ["v", "s"],
    range: "30 feet",
    duration: "Until the start of your next turn",
    flavor:
      "You are able to assist your companions with wise words and foresight.",
    description: [
      "The creature gets the benefits of the Help Action on its next d20 Test.",
    ],
    cantripUpgrade:
      "The range of this spell increases to 60 feet at 5th level, 120 feet at 10th level, and 300 feet at 17th level.",
    sources: ["divine"],
    tags: ["buff"],
  },
  {
    name: "Gust",
    level: 0,
    school: "transmutation",
    castingTime: "Action",
    range: "30 feet",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "You seize the air and force it to move at your command.",
    description: [
      "On a successful Attempt, choose one of the following effect:",
      "- One Medium or smaller creature that you can see is pushed up to 5 feet away from you.",
      "- Push an object that isn't being worn or carried up to 5 feet away from you. It isn't pushed with enough force to cause direct damage.",
      "- You cause leaves to rustle, wind to slam shutters shut, your clothing to ripple in a breeze or any other harmless sensory effect linked to wind.",
    ],
    sources: ["arcane", "primal"],
    cantripUpgrade:
      "The maximum weight of the object you can affect increases to 10 pounds when you reach 5th level, 25 pounds at 10th level, and 50 pounds at 17th level. The size of the creature you can affect increases to Large at 5th level, Huge at 10th level, and Gargantuan at 17th level.",
    group: "Shape Nature",
    savingThrow: "str",
  },
  {
    name: "Infestation",
    level: 0,
    school: "conjuration",
    castingTime: "Action",
    range: "30 feet",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "a living flea or moth",
    flavor: "You cause a cloud of mites, fleas, and other parasites to appear.",
    description: [
      "The creature takes 1d8 poison damage and moves 5 feet in a random direction if it can move and one of its Speeds is at least 5 feet.",
      "The movement doesn't provoke opportunity attacks, and if the direction rolled is blocked, the target doesn't move.",
    ],
    cantripUpgrade:
      "This spell's damage increases by 1d8 when you reach 5th level (2d8), 10th level (3d8), and 17th level (4d8).",
    sources: ["arcane", "primal"],
    savingThrow: "con",
    damageTypes: ["poison"],
    tags: ["debuff"],
  },
  {
    name: "Light",
    level: 0,
    school: "conjuration",
    castingTime: "Action",
    range: "Touch",
    area: "40-foot-radius sphere",
    duration: "1 hour",
    components: ["v", "m"],
    material: "a firefly or phosphorescent moss",
    flavor: "You conjure a source of light on any surface.",
    description: [
      "The surface emits bright light in a 20-foot radius and dim light for an additional 20 feet.",
    ],
    cantripUpgrade:
      "Both radiuses increase to 40 feet when you reach 5th level and 60 feet at 10th level.",
    sources: ["arcane", "divine", "primal"],
    tags: ["area"],
  },
  {
    name: "Prestidigitation",
    level: 0,
    school: "transmutation",
    castingTime: "Action",
    range: "30 feet",
    duration: "See description",
    components: ["v", "s"],
    flavor: "Magic can be powerful, but it can also amuse.",
    description: [
      "You create one of the following magical effects within range:",
      "- You clean or soil an object no larger than 1 cubic foot.",
      "- You light or snuff out a candle, a torch, or a small campfire.",
      "- You can an unlocked door, window or container to open or slam shut.",
      "- You cause harmless tremors in the ground for 1 minute.",
      "- Your voice booms up to three times as loud as normal for 1 minutes.",
      "- You alter the color of your eyes, for 1 minute.",
      "- You create a nonmagical trinket or an illusory image that can fit in your hand and that lasts until the start of your next turn.",
      "- Until the start of your next turn, you create an harmless sensory effect, such as a shower of sparks, a puff of wind, faint musical notes, an odd odor, falling leaves, a rumble of thunder, the cry of a raven, ominous whispers or a similar phenomenon.",
      "- You chill or warm, a 5-foot cube area for 1 hour.",
      "- You flavor up 1 cubic foot of nonliving material for 1 hour.",
      "- You make a small mark appear on an object or surface for 1 hour.",
      "If you cast this spell multiple times, you can have up to three of its non-instantaneous effects active at a time. You can dismiss any effect as an Action.",
    ],
    cantripUpgrade:
      "The maximum amount of effects you can have active at a time increases to six when you reach 5th level, ten at 10th level, and twenty-five at 17th level.",
    sources: ["arcane", "divine", "primal"],
    group: "Shape Nature",
  },
  {
    name: "Mage Hand",
    level: 0,
    school: "conjuration",
    castingTime: "Action",
    range: "30 feet",
    duration: "1 minute",
    components: ["v", "s"],
    flavor: "You conjure a spectral, floating hand.",
    description: [
      "You can use your Action to control the hand. You can use the hand to manipulate an object, open an unlocked door or container, stow or retrieve an item from an open container, or pour the contents out of a vial. You can move the hand up to 30 feet each time you use it.",
      "The hand can't Attack, activate magic items, or carry more than 10 pounds.",
      "It can carry one object at a time, and anything it is carrying disappears if it is more than 30 feet away from you or if you cast this spell again.",
    ],
    sources: ["arcane"],
    tags: ["summon"],
  },
  {
    name: "Mending",
    level: 0,
    school: "transmutation",
    castingTime: "1 minute",
    range: "Touch",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "two lodestones",
    flavor:
      "As chips of wood appear out of thin air, the shallow dent in your cart repairs before everyone's eyes.",
    description: [
      "Repair a break or tear in a nonmagical nonliving object on a surface of up to 1 foot in width and height.",
    ],
    cantripUpgrade:
      "The width and height of the surface increases to 2 feet when you reach 5th level, 5 feet at 10th level, and 20 feet at 17th level.",
    sources: ["arcane", "divine", "primal"],
  },
  {
    name: "Message",
    level: 0,
    school: "transmutation",
    castingTime: "Action",
    range: "120 feet",
    duration: "Until the start of your next turn",
    components: ["v", "s", "m"],
    material: "a short piece of metal wire",
    flavor: "You communicate a distant message with a whisper.",
    description: [
      "You point your finger toward a creature within range and whisper a message. The target (and only the target) hears the message and can reply in a whisper that only you can hear.",
      "You can cast this spell through solid objects if you are familiar with the target and know it is beyond the barrier. Magical Silence, 1 foot of stone, 1 inch of common metal, a thin sheet of lead, or 3 feet of wood blocks the spell.",
    ],
    cantripUpgrade:
      "This cantrip's range increases to 300 feet when you reach 5th level, 1 mile at 10th level, and 20 miles at 17th level.",
    sources: ["bard", "arcane"],
  },
  {
    name: "Mind Sliver",
    level: 0,
    school: "enchantment",
    castingTime: "Action",
    range: "60 feet",
    duration: "Until the start of your next turn",
    components: ["v"],
    flavor:
      "You drive a disorienting spike of psychic energy into the mind of one creature.",
    description: [
      "The creature takes 1d6 psychic damage, and the the next time this round a d20 Test is rolled against that creature, the Test has a +1d2 bonus.",
    ],
    sources: ["bard", "arcane"],
    cantripUpgrade:
      "At 5th level, this spell's damage increases to 2d6 and its bonus to +1d4. At 10th level, the damage increases to 3d6 and the bonus to +1d6. At 17th level, the damage increases to 4d6 and the bonus to +1d8.",
    savingThrow: "int",
    damageTypes: ["psychic"],
    tags: ["buff"],
  },
  {
    name: "Minor Illusion",
    level: 0,
    school: "illusion",
    castingTime: "Action",
    range: "30 feet",
    duration: "1 minute",
    components: ["s", "m"],
    material: "a bit of fleece",
    flavor:
      "You have a knack for presenting tangible proof of thing that... aren't quite there.",
    description: [
      "Create one of the following effects:",
      "**Sound.** The volume can range from a whisper to a scream. The sound continues unabated throughout the duration, or you can make discrete sounds at different times before the spell ends.",
      "**Image.** The image must be an object no larger than a 5-foot cube. It can't create sound, light, smell, or any other sensory effect. Physical interaction with the image reveals it to be an illusion, because things can pass through it.",
      "If a creature uses its Action to examine the sound or image, the creature can determine that it is an illusion with a successful Intelligence (Investigation) Check. If a creature discerns the illusion for what it is, the illusion becomes faint to the creature.",
      "The illusion ends if you dismiss it as an Action or cast this spell again.",
    ],
    cantripUpgrade:
      "The size of the object you can create increases to 10-foot cube when you reach 5th level, 15-foot cube at 10th level, and 20-foot cube at 17th level. Moreover, you can have two illusions active at a time when you reach 5th level, three at 10th level, and four at 17th level.",
    sources: ["bard", "arcane"],
    tags: ["summon"],
    savingThrow: "int",
  },
  {
    name: "Mold Earth",
    level: 0,
    school: "transmutation",
    castingTime: "Action",
    range: "30 feet",
    duration: "Instantaneous",
    components: ["s"],
    flavor: "You modify the aspect and density of dirt or stone.",
    description: [
      "Choose one of the following effect:",
      "- Excavate 5-foot cube of loose earth. You can move the dirt up to 5 feet away. This movement doesn't have enough force to cause damage.",
      "- You cause shapes, colors, or both to appear on the dirt or stone, spelling out words, creating images, or shaping patterns. The changes last for 1 hour.",
      "- You cause a stone or dirt ground to become difficult terrain on a 5-foot surface, or difficult terrain to become normal terrain. This change lasts for 1 hour.",
      "If you cast this spell multiple times, you can have no more than two of its non-instantaneous effects active at a time, and you can dismiss such an effect as an Action.",
    ],
    sources: ["arcane", "primal"],
    cantripUpgrade:
      "At 5th level, the size of the cube and surface increases to 10 feet and duration of non-instantaneous effects increases to 8 hours. At 10th level, the size increases to 15 feet and the duration increases to 24 hours. At 17th level, the size increases to 20 feet and the effects are permanent.",
    group: "Shape Nature",
  },
  {
    name: "Shape Water",
    level: 0,
    school: "transmutation",
    castingTime: "Action",
    range: "30 feet",
    duration: "Instantaneous",
    components: ["s"],
    flavor: "You shape a volume of water.",
    description: [
      "Choose one of the following effect to apply on 5-foot cube of water:",
      "- You move or change the flow of the water, up to 5 feet in any direction. This movement doesn't have enough force to cause damage.",
      "- You cause the water to form into simple shapes and animate at your command. This change lasts for 1 hour.",
      "- You change the water's color or opacity. This change lasts for 1 hour.",
      "- You freeze the water, provided that there are no creatures in it. The water unfreezes in 1 hour.",
      "If you cast this spell multiple times, you can have no more than two of its non-instantaneous effects active at a time, and you can dismiss such an effect as an Action.",
    ],
    sources: ["arcane", "primal"],
    cantripUpgrade:
      "At 5th level, the size of the cube increases to 10 feet and duration of non-instantaneous effects increases to 8 hours. At 10th level, the size increases to 15 feet and the duration increases to 24 hours. At 17th level, the size increases to 20 feet and the effects are permanent.",
    group: "Shape Nature",
  },
  {
    name: "Poison Spray",
    level: 0,
    school: "necromancy",
    castingTime: "Action",
    range: "15 feet",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "You spray a mist of toxic energy on your enemy.",
    description: [
      "A creature doesn't benefit from half-cover against this spell.",
      "The creature takes 2d8 poison damage.",
    ],
    damageTypes: ["poison"],
    cantripUpgrade:
      "This spell's damage increases by 2d8 when you reach 5th level (4d8), 10th level (6d8), and 17th level (8d8).",
    savingThrow: "con",
    sources: ["arcane", "primal"],
    group: "Wild Nature",
  },
  {
    name: "Primal Savagery",
    level: 0,
    school: "transmutation",
    castingTime: "Action",
    range: "Self",
    duration: "Instantaneous",
    components: ["s"],
    flavor:
      "You channel primal magic to cause your teeth or fingernails to sharpen, to deliver a corrosive attack before returning their normal form.",
    description: [
      `${atkInstead("melee")} The Attack Roll and damage roll can be made using your Spellcasting Ability Modifier.`,
      "The creature takes 1d12 acid damage.",
    ],
    cantripUpgrade:
      "This spell's damage increases by 1d12 when you reach 5th level (2d12), 10th level (3d12), and 17th level (4d12).",
    sources: ["druid"],
    damageTypes: ["acid"],
    tags: ["melee"],
    group: "Wild Nature",
  },
  {
    name: "Protection",
    level: 0,
    school: "abjuration",
    castingTime: "Action",
    range: "Touch",
    duration: "1 minute",
    concentration: true,
    components: ["v", "s", "m"],
    material: "a miniature cloak",
    flavor: "You shield a creature from harm.",
    description: ["The creature is Resistant to nonmagical Physical damage."],
    sources: ["artificer", "divine"],
    tags: ["buff"],
    cantripUpgrade:
      "The number of creatures you can affect increases to 2 when you reach 5th level, 3 at 10th level, and 6 at 17th level.",
  },
  {
    name: "Ray of Frost",
    level: 0,
    school: "evocation",
    castingTime: "Action",
    range: "60 feet",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "A frigid beam of blue-white light streaks toward your enemy.",
    description: [
      "The creature takes 1d10 cold damage, and its Speeds are reduced by 10 feet until the start of your next turn.",
    ],
    damageTypes: ["cold"],
    cantripUpgrade:
      "This spell's damage increases by 1d10 when you reach 5th level (2d10), 10th level (3d10), and 17th level (4d10).",
    tags: ["ranged", "debuff"],
    sources: ["arcane"],
    group: "Elemental Rudiment",
  },
  {
    name: "Relieve Pain",
    level: 0,
    school: "abjuration",
    castingTime: "1 minute",
    range: "Touch",
    duration: "1 hour",
    components: ["v", "s", "m"],
    material: "a piece of bread and a cup of water",
    flavor:
      "Through the essence of nutrition, you soothe a creature's weariness or illness.",
    description: [
      "The creature is unaffected by the effect of one level of Exhaustion and its fever, nausea, or hangover (if any) is ignored.",
      "**Non-repeatable.** A creature affected by this spell can't be affected by it again until it finishes a Long Rest.",
    ],
    cantripUpgrade:
      "The number of creatures you can affect increases to 2 when you reach 5th level, 6 at 10th level, and 25 at 17th level.",
    sources: ["divine"],
    tags: ["heal"],
  },
  {
    name: "Sacred Flame",
    level: 0,
    school: "evocation",
    castingTime: "Action",
    range: "60 feet",
    duration: "Instantaneous",
    components: ["v"],
    flavor: "Bright flames are called from the heavens to engulf your foe.",
    description: [noHalfCover, "The creature takes 1d10 radiant damage."],
    cantripUpgrade:
      "This spell's damage increases by 1d10 when you reach 5th level (2d10), 10th level (3d10), and 17th level (4d10).",
    damageTypes: ["radiant"],
    savingThrow: "dex",
    group: "Blessed Radiance",
    sources: ["divine"],
  },
  {
    name: "Shillelagh",
    level: 0,
    school: "transmutation",
    castingTime: "Bonus Action",
    range: "Touch",
    duration: "1 minute",
    components: ["v", "s", "m"],
    material: "mistletoe, a shamrock leaf, and a club or quarterstaff",
    flavor: "You imbue a wooden weapon with the power of nature.",
    description: [
      "You can use your Spellcasting Ability instead of Strength for the Melee Attack rolls and damage rolls using the weapon.",
      "The weapon's damage die becomes a d10 and you can choose to replace its damage type with radiant damage when you cast the spell.",
      "The spell ends if you cast it again or if you let go of the weapon.",
    ],
    cantripUpgrade:
      "The damage die changes when you reach certain druid levels: 1d12 at 5th level, 2d8 at 10th level, and 2d12 at 17th level.",
    damageTypes: ["radiant"],
    tags: ["melee", "buff"],
    sources: ["druid"],
  },
  {
    name: "Shocking Grasp",
    level: 0,
    school: "evocation",
    castingTime: "Action",
    range: "Touch",
    duration: "Instantaneous",
    components: ["s"],
    flavor:
      "Lightning springs from your hand to deliver a shock to a creature.",
    description: [
      "Your Spellcasting Attempt is Easy if the creature is made of metal, or wearing metal armor.",
      "The creature takes 1d10 lightning damage, and it can't take Reactions until the start of its next turn.",
    ],
    damageTypes: ["lightning"],
    cantripUpgrade:
      "This spell's damage increases by 1d10 when you reach 5th level (2d10), 10th level (3d10), and 17th level (4d10).",
    tags: ["melee", "debuff"],
    sources: ["arcane"],
    group: "Elemental Rudiment",
  },
  {
    name: "Spare the Dying",
    level: 0,
    school: "necromancy",
    castingTime: "Action",
    range: "Touch",
    duration: "Instantaneous",
    components: ["s"],
    flavor:
      "You channel positive energy in your hands to stabilize a dying creature.",
    description: [
      "If it is Dying, the creature becomes stable. Then, it can spend a Hit Die and roll it to regain an amount of Hit Points equal to the roll + your Spellcasting Ability Modifier (minimum of 1).",
    ],
    tags: ["heal"],
    sources: ["divine"],
  },
  {
    name: "Sword Burst",
    level: 0,
    school: "conjuration",
    castingTime: "Action",
    range: "Self",
    area: "5-foot radius",
    duration: "Instantaneous",
    components: ["v"],
    sources: ["arcane"],
    flavor: "You create a circle of spectral blades that sweep around you.",
    description: ["Each creature takes 1d8 slashing damage."],
    cantripUpgrade:
      "This spell's damage increases by 1d8 when you reach 5th level (2d8), 10th level (3d8), and 17th level (4d8).",
    tags: ["area"],
    damageTypes: ["slashing"],
    savingThrow: "dex",
  },
  {
    name: "Thorn Whip",
    level: 0,
    school: "transmutation",
    castingTime: "Action",
    range: "30 feet",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "the stem of a plant with thorns",
    flavor:
      "You create a long vine covered in thorns that lashes out at your command.",
    description: [
      "The creature takes 1d8 piercing damage, and if it is Large or smaller, you pull it up to 10 feet closer to you.",
    ],
    cantripUpgrade:
      "The damage, range and pull distance increase when you reach certain levels. At 5th level, the damage increases to 2d8, the range to 60 feet, and the pull distance to 15 feet. At 10th level, the damage increases to 3d8, the range to 90 feet, and the pull distance to 20 feet. At 17th level, the damage increases to 4d8, the range to 120 feet, and the pull distance to 30 feet.",
    sources: ["primal"],
    tags: ["ranged"],
    damageTypes: ["piercing"],
    group: "Wild Nature",
  },
  {
    name: "Thunderclap",
    level: 0,
    school: "evocation",
    castingTime: "Action",
    range: "Self",
    area: "5-foot radius",
    duration: "Instantaneous",
    components: ["s"],
    flavor:
      "You create a burst of thunderous sound which resonates in your surroundings.",
    description: ["Each creature takes 1d8 thunder damage."],
    cantripUpgrade:
      "This spell's damage increases by 1d8 when you reach 5th level (2d8), 10th level (3d8), and 17th level (4d8).",
    damageTypes: ["thunder"],
    savingThrow: "con",
    tags: ["area"],
    sources: ["primal"],
    group: "Wild Nature",
  },
  {
    name: "Toll the Dead",
    level: 0,
    school: "necromancy",
    castingTime: "Action",
    range: "60 feet",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "You point at a creature and unleash a, ominous bell-like sound.",
    description: [
      "The creature takes 2d8 necrotic damage, or only 1d12 necrotic damage if it is missing any of its Hit Points.",
    ],
    savingThrow: "wis",
    damageTypes: ["necrotic"],
    cantripUpgrade:
      "This spell's number of damage dice increases when you reach 5th level (4d8 or 2d12), 10th level (6d8 or 3d12), and 17th level (8d8 or 4d12).",
    sources: ["divine"],
    group: "Requiems",
  },
  {
    name: "True Strike",
    level: 0,
    school: "divination",
    castingTime: "Action",
    range: "Self",
    duration: "Instantaneous",
    components: ["s", "m"],
    material: "the weapon you use for the Attack Roll",
    flavor: "A flash of magical insight guides your strike.",
    description: [
      `${atkInstead()} The Attack Roll and damage roll can be made using your Spellcasting Ability Modifier.`,
      "You deal damage normally, but you can choose to replace the weapon's damage type with force damage.",
    ],
    sources: ["arcane"],
    cantripUpgrade:
      "The damage of the Attack provided by this spell increases by 1d6 when you reach 5th level (2d6), 10th level (3d6), and 17th level (4d6).",
    tags: ["melee", "ranged", "buff"],
    damageTypes: ["force"],
    group: "Magic Strike",
  },
  {
    name: "Veil",
    level: 0,
    school: "abjuration",
    castingTime: "Action",
    range: "60 feet",
    duration: "1 minute, or until hit",
    components: ["v", "s"],
    flavor: "You wreathe a creature with a protective veil of radiant energy.",
    description: [
      "The creature glows, shedding bright light in a 5-foot radius and dim light for an additional 5 feet.",
      "While glowing, if the creature is hit by a Melee Attack or Spell, the attacker takes 1d12 radiant damage and this spell ends.",
      "An unwilling creature can try to resist this spell.",
    ],
    damageTypes: ["radiant"],
    cantripUpgrade:
      "This spell's damage increases by 1d12 when you reach 5th level (2d12), 10th level (3d12), and 17th level (4d12).",
    savingThrow: "wis",
    tags: ["buff"],
    group: "Blessed Radiance",
    sources: ["divine"],
  },
  {
    name: "Vicious Mockery",
    level: 0,
    school: "enchantment",
    castingTime: "Action",
    range: "60 feet",
    duration: "Instantaneous",
    components: ["v"],
    flavor: "You unleash a string of insults laced with subtle enchantments.",
    description: [
      "The creature takes 1d8 psychic damage, and it has Disadvantage on the next d20 Test it makes as an Action or Bonus Action before the end of its next turn.",
    ],
    damageTypes: ["psychic"],
    cantripUpgrade:
      "This spell's damage increases by 1d8 when you reach 5th level (2d8), 10th level (3d8), and 17th level (4d8).",
    savingThrow: "wis",
    sources: ["bard"],
    tags: ["debuff"],
  },
  {
    name: "Wind Whisper",
    level: 0,
    school: "divination",
    castingTime: "1 minute",
    range: "Self",
    area: "Up to 4-mile radius",
    concentration: true,
    duration: "Until dispelled",
    components: ["v", "s", "m"],
    material: "enchanted herbs",
    flavor:
      "You enter a trance and listen to primal energy transmitted through the wind.",
    description: [
      "You become Uncounscious, except you can take an Action to end the spell.",
      "While in the trance, you can receive and broadcast emotions to and from creatures using this spell or similar magic. Nature itself sends primal energy that you can perceive with this spell.",
      "This spell doesn't allow you to know the location of eachu communiate with.",
      "The communication isn't instantaneous. It takes a round for an emotion to travel 1 mile (i.e. it takes a minute to travel 10 miles).",
    ],
    sources: ["primal"],
    cantripUpgrade:
      "This spell's maximum radius increases to 15 miles when you reach 5th level, 100 miles at 10th level, and 1,000 miles at 17th level. Starting at 10th level, the communication can be as articulate as normal speech.",
  },
  {
    name: "Word of Radiance",
    level: 0,
    school: "evocation",
    castingTime: "Action",
    range: "Self",
    area: "5-foot radius",
    duration: "Instantaneous",
    components: ["v", "m"],
    material: "a holy symbol",
    flavor: "You utter a divine word, and burning radiance erupts from you.",
    description: ["Each creature takes 1d8 radiant damage."],
    sources: ["divine"],
    savingThrow: "con",
    tags: ["area"],
    cantripUpgrade:
      "This spell's damage increases by 1d8 when you reach 5th level (2d8), 10th level (3d8), and 17th level (4d8).",
    damageTypes: ["radiant"],
    group: "Blessed Radiance",
  },
  {
    name: "Absorb Elements",
    level: 1,
    school: "abjuration",
    castingTime: "Reaction, taken right before you take damage",
    range: "Self",
    duration: "Until the start of your next turn",
    components: ["s"],
    flavor: "Your skin briefly becomes one with the elements.",
    description: [
      "You are Resistant against the elemental type of your choice: acid, cold, fire, lightning, or thunder.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "you can have another creature within 5 feet of you benefit from this spell."
    ),
    sources: ["arcane", "primal"],
    group: "Barrier",
    tags: ["buff"],
  },
  {
    name: "Alarm",
    level: 1,
    school: "abjuration",
    castingTime: "Action",
    range: "30 feet",
    area: "20-foot cube",
    duration: "8 hours",
    ritual: true,
    components: ["v", "s", "m"],
    material: "a tiny bell and a piece of fine silver wire",
    flavor: "You set an alarm against unwanted intrusion.",
    description: [
      "Choose a door, a window, or an area as the source of the area you ward. Until the spell ends, an Alarm alerts you whenever a Tiny or larger creature touches or enters the warded area.",
      "When you cast the spell, you can designate creatures that won't set off the alarm. You also choose whether the alarm is audible and whether the alarm alerts you mentally.",
      "A mental alarm alerts you with a ping in your mind if you are within 1 mile of the warded area. This ping awakens you if you are sleeping. An audible alarm produces the sound of a hand bell for 10 seconds within 120 feet.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the area of the spell increases by 10 feet, the duration increases by one day, and the range of the mental ping increases by 1 mile."
    ),
    sources: ["bard", "arcane"],
    // tags: ["utility"],
  },
  {
    name: "Animal Friendship",
    level: 1,
    school: "enchantment",
    castingTime: "Action",
    range: "30 feet",
    duration: "24 hours",
    components: ["v", "s", "m"],
    material: "a morsel of food",
    flavor: "You convince a beast that you mean it no harm.",
    sources: ["primal"],
    description: [
      beastOnly,
      "One beast is Charmed by you.",
      "If you or one of your companions harm the target, the spells ends.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "you can affect one additional beast and the duration increases by 24 hours."
    ),
    tags: ["debuff"],
    group: "Beast Bond",
    savingThrow: "wis",
  },
  // {
  //   name: "Armor of Agathys",
  // },
  // {
  //   name: "Arms of Hadar",
  // },
  {
    name: "Arrow",
    level: 1,
    school: "evocation",
    castingTime: "Action",
    range: "300 feet",
    components: ["v", "s"],
    duration: "Instantaneous",
    flavor:
      "You create an immense arrow of pure energy and shoot it with high precision.",
    description: [
      "This spell always hits (don't roll against the Target).",
      "You create an arrow that deals 3d6+3 force damage.",
    ],
    damageTypes: ["force"],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 1d6+1."),
    sources: ["arcane"],
    group: "Magic Missile",
    tags: ["ranged"],
  },
  {
    name: "Bane",
    level: 1,
    school: "enchantment",
    castingTime: "Action",
    range: "60 feet",
    components: ["v", "s", "m"],
    material: "a drop of blood",
    concentration: true,
    duration: "1 minute",
    flavor: "You curse your enemies' ability to strike you.",
    description: [
      "Up to three creatures that you can see become cursed.",
      "Whenever they make an Attack Roll or a Saving Throw, they must roll a d4 and subtract the number rolled from the Test.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "you can target one additional creature."
    ),
    sources: ["divine"],
    tags: ["debuff"],
    group: "Divine Enchantment",
    savingThrow: "cha",
  },
  {
    name: "Bless",
    level: 1,
    school: "enchantment",
    castingTime: "Action",
    range: "30 feet",
    components: ["v", "s", "m"],
    material: "a sprinkling of holy water",
    concentration: true,
    duration: "1 minute",
    flavor: "You bless your allies with divine favor.",
    description: [
      "Up to three creatures of your choice within range become blessed. Whenever they make an Attack Roll or a Saving Throw, they gain a +1 bonus to the Test.",
    ],
    atHigherLevels: addTarget(1),
    sources: ["divine"],
    tags: ["buff"],
    group: "Divine Enchantment",
  },
  {
    name: "Burning Hands",
    level: 1,
    school: "evocation",
    castingTime: "Action",
    range: "Self",
    area: "three adjacent lines 15 feet long and 5 feet wide",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "You unleash a wave of fire from your outstretched fingertips.",
    description: [
      "On a hit, each creature takes 3d6 fire damage. On a miss, each creature takes only half as much damage.",
    ],
    atHigherLevels: forEachAboveDo(1, "The damage increases by 1d6."),
    sources: ["arcane"],
    tags: ["area"],
    damageTypes: ["fire"],
    savingThrow: "dex",
    group: "Elemental Burst",
  },
  {
    name: "Catapult",
    level: 1,
    school: "transmutation",
    castingTime: "Action",
    range: "60 feet",
    duration: "Instantaneous",
    components: ["s"],
    flavor: "You launch an object at a creature.",
    description: [
      "Choose an object weighing up to 5 pounds that isn't being worn or carried by an unwilling creature. The object flies in a straight line up to 120 feet in a direction you choose; after that distance, it falls to the ground. If the object encounters a creature or a solid surface, the object stops early and you can have the spell deal 3d10 bludgeoning damage to the target.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the damage increases by 1d10 and the weight limit increases by 5 pounds."
    ),
    damageTypes: ["bludgeoning"],
    sources: ["bard", "arcane"],
    tags: ["ranged"],
  },
  {
    name: "Cause Fear",
    level: 1,
    school: "necromancy",
    castingTime: "Action",
    range: "60 feet",
    duration: "1 minute",
    concentration: true,
    components: ["v"],
    flavor: "You awaken the sense of mortality in your foe.",
    description: [
      "One creature is Frightened of you.",
      "A creature can roll a Wisdom Saving Throw at the end of each of its turns, ending the effect on itself on a success.",
    ],
    atHigherLevels: addTarget(1),
    sources: ["bard", "arcane"],
    tags: ["debuff"],
    savingThrow: "wis",
  },
  {
    name: "Caustic Brew",
    level: 1,
    school: "evocation",
    castingTime: "Action",
    range: "Self",
    area: "30-foot line",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "a bit of rotten food",
    flavor: "A stream of acid gushes from your hand.",
    description: [
      "Each creature is covered in acid until it or another creature uses an Action to wash it off.",
      "A creature covered in acid takes 2d6 acid damage at the start of each of its turns.",
    ],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 2d6."),
    group: "Elemental Burst",
    sources: ["arcane"],
    damageTypes: ["acid"],
    tags: ["area", "debuff"],
  },
  // {
  //   name: "Ceremony",
  // },
  {
    name: "Chaos Bolt",
    level: 1,
    school: "evocation",
    castingTime: "Action",
    range: "120 feet",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor:
      "You manifest and hurl an undulating, warbling mass of chaotic energy.",
    description: [
      "The creature takes 2d8 + 1d12 damage. Choose one of the d8s. The number it rolled determines the type of damage you deal (see below). If you scored a Critical Hit on your Spellcasting Attempt or you rolled the same number on both d8s, the chaotic energy leaps from the target to a different creature of your choice within 30 feet of it. Make a new Spellcasting Attempt against the new target.",
      "You can't choose the same creature as a target more than once in a turn.",
      "**Damage Type.** (1) Acid – (2) Cold – (3) Fire – (4) Force – (5) Lightning – (6) Poison – (7) Psychic – (8) Thunder",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "each creature takes 1d12 extra damage of the type rolled."
    ),
    sources: ["sorcerer"],
    damageTypes: [
      "acid",
      "cold",
      "fire",
      "force",
      "lightning",
      "poison",
      "psychic",
      "thunder",
    ],
    tags: ["ranged"],
    group: "Colorful Energy",
  },
  {
    name: "Charm Person",
    level: 1,
    school: "enchantment",
    castingTime: "Action",
    range: "30 feet",
    duration: "1 hour",
    components: ["v", "s"],
    flavor: "Your presence inspires a friendly attitude in other humanoids.",
    description: [
      "One humanoid becomes Charmed by you.",
      "If you or one of your companions harm the target, the spell ends.",
    ],
    atHigherLevels: addTarget(1),
    sources: ["divine"],
    savingThrow: "wis",
    tags: ["debuff"],
    group: "Divine Enchantment",
  },
  {
    name: "Chromatic Orb",
    level: 1,
    school: "evocation",
    castingTime: "Action",
    range: "90 feet",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "a pricy gem",
    flavor: "You materialize a 4-inch-diameter sphere of energy and hurl it.",
    description: [
      "The creature takes 3d10 damage of a type you choose: acid, cold, fire, lightning, poison, or thunder.",
    ],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 1d10."),
    sources: ["arcane"],
    damageTypes: ["acid", "cold", "fire", "lightning", "poison", "thunder"],
    tags: ["ranged"],
    group: "Colorful Energy",
  },
  {
    name: "Color Spray",
    level: 1,
    school: "illusion",
    castingTime: "Action",
    range: "Self",
    area: "15-foot cube",
    duration: "Until the end of your next turn",
    components: ["v", "s", "m"],
    material: "a pinch of powder or sand",
    flavor:
      "A dazzling array of flashing, colored light springs from your hand.",
    description: [
      "Roll 6d10. The total is how many Hit Points of creatures this spell can affect. Creatures are affected in ascending order of their current Hit Points (ignoring unconscious creatures and creatures that can't see).",
      "Starting with the creature that has the lowest current Hit Points, each creature is Blinded.",
    ],
    atHigherLevels: forEachAboveDo(1, "roll an additional 3d10."),
    sources: ["bard", "arcane"],
    tags: ["area", "debuff"],
    group: "Colorful Energy",
  },
  {
    name: "Command",
    level: 1,
    school: "enchantment",
    castingTime: "Action",
    range: "60 feet",
    duration: "Until the start of your next turn",
    components: ["v"],
    flavor: "You issue a short order for a creature to obey.",
    description: [
      "You issue a one-word command to a creature that can understand you. The creature obeys the command as best it can during before your next turn. The spell fails if the command is directly harmful to the creature.",
      "Here are a few examples of issuables commands and their effects:",
      "**Approach.** The target moves toward you by the shortest and most direct route. Its turn ends if it moves within 5 feet of you.",
      "**Drop.** The target drops whatever it is holding and then ends its turn.",
      "**Flee.** The target spends its turn moving away from you by the fastest available means.",
      "**Grovel.** The target falls prone and then ends its turn.",
      "**Halt.** The target stays where it is and takes no Actions. Its turn ends.",
      "**Smash.** The target makes a Melee Attack against the nearest creature or object.",
    ],
    atHigherLevels: addTarget(1),
    sources: ["divine"],
    tags: ["debuff"],
    savingThrow: "wis",
  },
  // {
  //   name: "Compelled Duel",
  // },
  // {
  //   name: "Comprehend Languages",
  // },
  {
    name: "Connection",
    level: 1,
    school: "divination",
    castingTime: "Action",
    range: "Touch",
    duration: "10 minutes",
    components: ["v", "s", "m"],
    material: "a bit of fur wrapped in a cloth",
    concentration: true,
    flavor: "You forge a telepathic link with a beast.",
    description: [
      beastOnly,
      "You establish a telepathic link with the beast if it is friendly to you or Charmed by you.",
      "Through this link, the beast can understand your telepathic messages you give it and it can respond with simple emotions and concepts.",
      "While the link is active, the beast gains Advantage on Attack Rolls against any creature within 5 feet of you.",
    ],
    sources: ["primal"],
    tags: ["buff"],
    atHigherLevels: forEachAboveDo(1, "the duration increases by 10 minutes."),
    group: "Beast Bond",
  },
  {
    isPrivate: true,
    name: "Create or Destroy Water",
    level: 1,
    school: "transmutation",
    castingTime: "Action",
    range: "30 feet",
    area: "30-foot cube",
    components: ["v", "s", "m"],
    material:
      "a drop of water (if creating water) or a few grains of sand (if destroying it)",
    duration: "Instantaneous",
    flavor: "The most essential element holds no secrets from you.",
    description: [
      "Choose one of the following effects:",
      "**Create Water.** You create up to 10 gallons of clean water within range in an open container. Alternatively, the water falls as rain in the area, extinguishing exposed flames.",
      "**Destroy Water.** You destroy up to 10 gallons of water in an open container. Alternatively, you destroy fog in the area.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "you create or destroy 10 additional gallons of water, or the size of the cube increases by 10 feet."
    ),
    sources: ["divine", "primal"],
  },
  {
    name: "Cure Wounds",
    level: 1,
    school: "evocation",
    castingTime: "Action",
    range: "Touch",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "You channel positive energy to heal a creature's wounds.",
    description: [
      "The creature regains a number of Hit Points equal to 1d12 + your Spellcasting Ability Modifier.",
    ],
    atHigherLevels: forEachAboveDo(1, "the healing increases by 1d12."),
    tags: ["heal"],
    sources: ["divine", "primal"],
  },
  {
    name: "Darts",
    level: 1,
    school: "evocation",
    castingTime: "Action",
    range: "120 feet",
    components: ["v", "s"],
    duration: "Instantaneous",
    flavor: "Darts of energy erupt from your palms and shoot without warning.",
    description: [
      "This spell always hits (don't roll against the Target).",
      "You create three darts that deal 1d4+1 force damage each.",
      "The darts hit simultaneously and you can direct them to hit one creature or several.",
    ],
    damageTypes: ["force"],
    atHigherLevels: forEachAboveDo(1, "you create an additional dart."),
    sources: ["arcane"],
    group: "Magic Missile",
    tags: ["ranged"],
  },
  {
    name: "Detect Evil and Good",
    level: 1,
    school: "divination",
    castingTime: "Action",
    range: "Self",
    area: "30-foot radius sphere",
    concentration: true,
    ritual: true,
    duration: "10 minutes",
    components: ["v", "s"],
    flavor: "You sense the presence of otherworldly creatures.",
    description: [
      "You know if there is an aberration, celestial, elemental, fey, fiend, or undead within the area, as well as where the creature is located.",
      "Similarly, you know if there is a place or object within the area that has been magically consecrated or desecrated.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the radius of the sphere increases by 15 feet."
    ),
    sources: ["divine"],
    group: "Sense the Unseen",
  },
  {
    name: "Detect Magic",
    level: 1,
    school: "divination",
    castingTime: "Action",
    range: "Self",
    area: "30-foot radius sphere",
    concentration: true,
    ritual: true,
    duration: "10 minutes",
    components: ["v", "s"],
    flavor: "Your senses awaken to the mystical tapestry that surrounds you.",
    description: [
      "You see a faint aura around any visible creature or object that bears magic.",
      "As an Action, you can learn the school of magic of an aura, if it has one.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the radius of the sphere increases by 15 feet."
    ),
    group: "Sense the Unseen",
    sources: ["arcane", "divine", "primal"],
  },
  {
    name: "Detect Metal and Mineral",
    level: 1,
    school: "divination",
    castingTime: "Action",
    range: "Self",
    area: "10-foot radius sphere",
    concentration: true,
    ritual: true,
    duration: "10 minutes",
    components: ["v", "s"],
    flavor:
      "Throuh the toughest material, you sense the presence of metals and minerals.",
    description: [
      "You perceive metals and minerals and can recognize them instantaneously if you are familiar with them.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the radius of the sphere increases by 5 feet."
    ),
    group: "Sense the Unseen",
    sources: ["arcane", "primal"],
  },
  {
    name: "Detect Life",
    level: 1,
    school: "divination",
    castingTime: "Action",
    range: "Self",
    area: "60-foot radius sphere",
    ritual: true,
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor:
      "In a flash, you sense the presence of living creatures around you.",
    description: [
      "You perceive living creatures and can recognize their Creature Type if you are familiar with it.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the radius of the sphere increases by 30 feet."
    ),
    group: "Sense the Unseen",
    sources: ["primal"],
  },
  {
    name: "Detect Poison and Disease",
    level: 1,
    school: "divination",
    castingTime: "Action",
    range: "Self",
    area: "30-foot radius sphere",
    concentration: true,
    ritual: true,
    duration: "10 minutes",
    components: ["v", "s", "m"],
    material: "a yew leaf",
    flavor: "The presence of illness becomes obvious in a timely manner.",
    description: [
      "You perceive poisons, poisonous creatures, or diseases and can recognize them instantaneously if you are familiar with them.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the radius of the sphere increases by 15 feet."
    ),
    group: "Sense the Unseen",
    sources: ["divine", "primal"],
  },
  // {
  //   name: "Disguise Self",
  // },
  {
    name: "Dissonant Whispers",
    level: 1,
    school: "enchantment",
    castingTime: "Action",
    range: "60 feet",
    duration: "Instantaneous",
    components: ["v"],
    flavor: "A faint discordant melody plays in the mind of your enemy.",
    description: [
      "Deafened creatures are immune to this spell.",
      "On a hit, the creature takes 3d8 psychic damage and must immediately use its Reaction, if available, to safely move away from you as far as its Speeds allow. On a miss, the creature takes half as much damage and doesn't have to move away.",
    ],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 1d8."),
    sources: ["bard"],
    savingThrow: "wis",
    damageTypes: ["psychic"],
  },
  {
    name: "Divine Favor",
    level: 1,
    school: "evocation",
    castingTime: "Bonus Action",
    range: "Self",
    duration: "1 minute",
    components: ["v", "s"],
    concentration: true,
    flavor: "Your prayers empower your weapon with divine energy.",
    description: ["Your Attacks deal an extra 1d4 radiant damage."],
    atHigherLevels:
      "The damage increases to 1d6 with 3rd- or 4th-level spell slots and to 1d8 with a 5th-level spell slot.",
    tags: ["buff"],
    sources: ["divine"],
    damageTypes: ["radiant"],
  },
  {
    name: "Divine",
    level: 1,
    school: "evocation",
    castingTime:
      "Bonus Action, taken immediately hitting a creature with a Melee Attack",
    range: "Self",
    duration: "Instantaneous",
    components: ["v"],
    flavor: "Your strike glows with divine energy.",
    description: [
      "The creature takes 2d10 radiant damage.",
      "**Unholy Enemy.** An Undead or a Fiend takes an extra 1d10 radiant damage.",
    ],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 1d10."),
    sources: ["paladin"],
    damageTypes: ["radiant"],
    tags: ["melee"],
    group: "Smite",
  },
  {
    name: "Earth Tremor",
    level: 1,
    school: "evocation",
    castingTime: "Action",
    range: "60 feet",
    area: "10-foot radius surface",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "You cause the ground to shake all around you.",
    description: [
      "Each creature takes 1d8 bludgeoning damage and is knocked Prone.",
      "If the ground in the area is loose earth or stone, it becomes difficult terrain.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the damage increases by 1d8 and the radius of the area increases by 5 feet."
    ),
    sources: ["arcane", "primal"],
    damageTypes: ["bludgeoning"],
    savingThrow: "dex",
    tags: ["area", "control"],
  },
  {
    name: "Energy",
    level: 1,
    school: "abjuration",
    castingTime: "Action",
    range: "Touch",
    duration: "8 hours",
    components: ["v", "s", "m"],
    material: "a lodestone",
    flavor: "You protect a creature with a magical force.",
    description: [
      "The creature gains an amount of Resilience Points equal to four times your Spellcasting Ability Modifier.",
    ],
    atHigherLevels: addTarget(1),
    sources: ["arcane"],
    tags: ["buff"],
    group: "Mage Armor",
  },
  // {
  //   name: "Ensnaring Strike",
  //   level: 1,
  //   school: "conjuration",
  //   castingTime: "Bonus Action",
  //   range: "Self",
  //   duration: "1 minute",
  //   components: ["v"],
  //   concentration: true,
  //   flavor: "Your weapon becomes imbued with nature's power.",
  //   sources: ["ranger"],
  // },
  {
    name: "Entangle",
    level: 1,
    school: "conjuration",
    castingTime: "Action",
    range: "90 feet",
    area: "20-foot square",
    duration: "1 minute",
    components: ["v", "s"],
    concentration: true,
    sources: ["primal"],
    flavor: "Plants and vines spring from the ground and ensnare your foes.",
    description: [
      "Each creature is Restrained by entangling plants. A creature can make a Strength Saving Throw at the end of each of its turns, ending the effect on itself on a success.",
      "The area becomes difficult terrain.",
      "When the spell ends, the plants wilt away.",
    ],
    atHigherLevels: forEachAboveDo(1, "the area increases by 5 feet."),
    savingThrow: "str",
    tags: ["area", "control"],
  },
  {
    name: "Expeditious Retreat",
    level: 1,
    school: "transmutation",
    castingTime: "Bonus Action",
    range: "Self",
    duration: "10 minutes",
    components: ["v", "s"],
    concentration: true,
    flavor: "You move with supernatural speed.",
    description: [
      "On a successful Spellcasting Attempt, and then each turn as a Bonus Action, you can take the Dash Action.",
    ],
    sources: ["bard", "arcane"],
    tags: ["movement"],
    atHigherLevels: `When you cast this spell using a spell slot of 2nd level or higher, the range of the spell becomes Touch. ${addTarget(1)}`,
  },
  {
    name: "Faerie Fire",
    level: 1,
    school: "evocation",
    castingTime: "Action",
    range: "60 feet",
    area: "20-foot cube",
    duration: "1 minute",
    components: ["v"],
    concentration: true,
    flavor: "You make creatures and objects glow with a an eerie color.",
    description: [
      "Each creature in the area sheds light in 20-foot radius. The creatures can't benefit from being Invisible.",
      "Attack Rolls and Melee or Ranged Spellcasting Attempts against the creatures have Advantage if the attacker can see them.",
    ],
    atHigherLevels: forEachAboveDo(1, "the area increases by 5 feet."),
    savingThrow: "dex",
    sources: ["artificer", "bard", "druid"],
    tags: ["area", "debuff"],
    group: "Colorful Energy",
  },
  {
    name: "False Life",
    level: 1,
    school: "necromancy",
    castingTime: "Reaction, taken right before you take damage",
    range: "Self",
    duration: "1 minute",
    components: ["v", "s", "m"],
    material: "a small amount of alcohol or distilled spirits",
    flavor:
      "You draw on the power of unlife to swiftly grant yourself vitality.",
    description: [
      "You gain a number of Resilience Points equal to 1d6 plus your Spellcasting Ability Modifier.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "you gain 1d6 additional Resilience Points."
    ),
    tags: ["buff"],
    sources: ["arcane"],
    group: "Barrier",
  },
  {
    name: "Feather Fall",
    level: 1,
    school: "transmutation",
    castingTime:
      "Reaction, taken right before you or a creature within range falls",
    range: "60 feet",
    duration: "1 minute",
    components: ["v", "m"],
    material: "a small bird feather or piece of down",
    flavor: "You slow the descent of falling creatures.",
    description: [
      "Up to five falling creatures within range descend 60 feet per round instead of falling and take no damage from the fall.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the number of creatures you can affect increases by five, the range increases by 60 feet and the duration increases by 1 minute."
    ),
    sources: ["bard", "arcane"],
    tags: ["buff"],
  },
  // {
  //   name: "Find Familiar",
  // },
  // {
  //   name: "Floating Disk",
  //   level: 1,
  //   school: "conjuration",
  //   castingTime: "Action",
  // },
  {
    name: "Fog Cloud",
    level: 1,
    school: "conjuration",
    castingTime: "Action",
    range: "120 feet",
    area: "20-foot-radius sphere",
    duration: "1 hour",
    components: ["v", "s", "m"],
    material: "a few drops of water",
    flavor: "You conjure a thick mist that obscures vision.",
    description: [
      "The area becomes Heavily Obscured.",
      "A moderate wind (at least 10 miles per hour) disperses the fog.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the radius of the sphere increases by 20 feet."
    ),
    sources: ["arcane", "primal"],
    tags: ["area", "control"],
  },
  {
    name: "Goo",
    level: 1,
    school: "abjuration",
    castingTime: "Reaction, taken right before you take damage",
    range: "Self",
    duration: "Until the start of your next turn",
    components: ["v", "s"],
    flavor:
      "The air around you becomes thick and absorbs the impact of any attack.",
    description: ["You have Absorb all damage 2."],
    atHigherLevels: forEachAboveDo(1, "the Absorb all damage increases by 1."),
    sources: ["arcane"],
    group: "Barrier",
    tags: ["buff"],
  },
  // {
  //   name: "Goodberry",
  // },
  {
    name: "Grease",
    level: 1,
    school: "conjuration",
    castingTime: "Action",
    range: "60 feet",
    area: "10-foot square",
    duration: "1 minute",
    components: ["v", "s", "m"],
    material: "a bit of animal fat",
    flavor: "You create a very slippery substance on the ground.",
    description: [
      "Each creature falls Prone.",
      "The area becomes difficult terrain and any creature that enters it or ends its turn there must succeed on a Dexterity Saving Throw or fall Prone.",
    ],
    atHigherLevels: forEachAboveDo(1, "the area increases by 10 feet."),
    sources: ["bard", "arcane"],
    tags: ["area", "control"],
    savingThrow: "dex",
  },
  {
    name: "Guiding Bolt",
    level: 1,
    school: "evocation",
    castingTime: "Action",
    range: "120 feet",
    duration: "Until the start of your next turn",
    components: ["v", "s"],
    flavor: "A flash of light streaks towards your target.",
    sources: ["cleric"],
    description: [
      "On a hit, the creature takes 4d6 radiant damage and the next Attack Roll against the creature has Advantage.",
      "The creature sheds dim light in a 5-foot radius and can't benefit from being Invisible.",
    ],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 2d6."),
    tags: ["ranged", "debuff"],
    damageTypes: ["radiant"],
  },
  {
    name: "Hail of Thorns",
    level: 1,
    school: "conjuration",
    castingTime: "Bonus Action",
    range: "Self",
    duration: "1 minute",
    components: ["v"],
    concentration: true,
    sources: ["ranger"],
    flavor: "You create a storm of thorns around the place you shoot.",
    description: [
      "The next time you hit a creature with a Ranged weapon Attack, the creature and each creatures within 5 feet of it take 2d6 piercing damage. Then, the spell ends.",
    ],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 2d6."),
    tags: ["buff"],
    damageTypes: ["piercing"],
  },
  // {
  //   name: "Healing Word",
  //   level: 1,
  //   school: "evocation",
  //   castingTime: "Bonus Action",
  //   range: "60 feet",
  //   duration: "Instantaneous",
  //   components: ["v"],
  //   flavor: "You whisper a prayer to heal your allies.",
  //   description: [
  //     "The creature regains a number of Hit Points equal to 1d4 + your Spellcasting Ability Modifier.",
  //   ],
  //   atHigherLevels:
  //     "When you cast this spell using a spell slot of 2nd level or higher, the healing increases by 1d4 for each slot level above 1st.",
  //   tags: ["heal"],
  //   sources: ["bard", "cleric"],
  // },
  {
    name: "Hellish Rebuke",
    level: 1,
    school: "evocation",
    castingTime: "Reaction, taken right after you take damage",
    range: "60 feet",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "You unleash the fires of Hell upon your attacker.",
    description: [
      "The creature takes 4d6 fire damage.",
      "On a miss, the creature takes only half as much damage.",
    ],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 2d6."),
    sources: ["warlock"],
    tags: ["ranged"],
    damageTypes: ["fire"],
  },
  // {
  //   name: "Hex",
  //   level: 1,
  //   school: "enchantment",
  //   castingTime: "Bonus Action",
  //   range: "90 feet",
  //   duration: "1 hour",
  //   components: ["v", "s", "m"],
  //   material: "a small iron nail",
  //   sources: ["warlock"],
  // },
  {
    name: "Heroism",
    level: 1,
    school: "enchantment",
    castingTime: "Action",
    range: "Touch",
    duration: "1 minute",
    components: ["v", "s"],
    concentration: true,
    flavor: "You inspire a creature with bravery and resolve.",
    description: [
      "The creature is immune to being Frightened and gains Resilience Points equal to your Spellcasting Ability Modifier at the start of each of its turns.",
    ],
    atHigherLevels: addTarget(1),
    sources: ["bard", "paladin"],
    tags: ["buff"],
  },
  {
    name: "Hideous Laughter",
    level: 1,
    school: "enchantment",
    castingTime: "Action",
    range: "30 feet",
    duration: "1 minute",
    concentration: true,
    components: ["v", "s", "m"],
    material: "tiny tarts and a feather",
    flavor: "You cause irresistible laughter in a creature.",
    description: [
      "Creatures with an Intelligence score of 4 or less are immune to this spell.",
      "The creature falls Prone and becomes Incapacitated and unable to stand up.",
      "A creature can roll a Wisdom Saving Throw at the end of each of its turns or whenever it takes damage, ending the effect on itself on a success.",
    ],
    atHigherLevels: addTarget(1),
    sources: ["bard", "arcane"],
    savingThrow: "wis",
    group: "Artistry",
    tags: ["debuff"],
  },
  {
    name: "Hunter's Mark",
    level: 1,
    school: "divination",
    castingTime: "Bonus Action",
    range: "90 feet",
    duration: "1 hour",
    components: ["v"],
    concentration: true,
    flavor: "You magically mark a creature as your prey.",
    description: [
      "The creature takes an extra 1d6 Force damage the first time you hit it with an Attack each turn.",
      "You have Advantage on any Wisdom (Perception or Survival) Check you make to find it.",
      "If the target drops to 0 Hit Points before this spell ends, you can use a Bonus Action on a subsequent turn of yours to mark a new creature.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the damage increases by 1d6 and the duration doubles."
    ),
    sources: ["ranger"],
  },
  // {
  //   name: "Ice Knife",
  // },
  // {
  //   name: "Identify",
  // },
  {
    name: "Illusory Script",
    level: 1,
    school: "illusion",
    castingTime: "1 minute",
    range: "Touch",
    duration: "30 days",
    components: ["s", "m"],
    material: "an affordable lead-based ink, which the spell consumes",
    ritual: true,
    flavor:
      "You write a message that can only be read by the intended recipient.",
    description: [
      "You write a message of up to 250 words on a surface. The message appears to be an entirely different message to any creature other than specific creatures you choose. To all others, the message appears as if it were written in a different language or a different script at your discretion.",
      "If dispelled, the original script and the illusion both disappear.",
    ],
    sources: ["bard", "arcane"],
    atHigherLevels: forEachAboveDo(1, "the duration doubles."),
  },
  {
    name: "Inflict Wounds",
    level: 1,
    school: "necromancy",
    castingTime: "Action",
    range: "Touch",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "You channel negative energy to make a creature wither.",
    description: ["The creature takes 4d10 necrotic damage."],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 1d10."),
    sources: ["cleric"],
    damageTypes: ["necrotic"],
    tags: ["melee"],
  },
  {
    name: "Jump",
    level: 1,
    school: "transmutation",
    castingTime: "Action",
    range: "Touch",
    duration: "10 minutes",
    components: ["v", "s", "m"],
    material: "a grasshopper's hind leg",
    flavor: "You imbue a creature with the power to leap great distances.",
    description: [
      "Once on each of its turns, the creature can spend 10 feet of Movement to jump 30 feet in any direction.",
    ],
    atHigherLevels: addTarget(1),
    sources: ["arcane", "primal"],
    tags: ["movement"],
    group: "Enhance Movement",
  },
  {
    name: "Leather",
    level: 1,
    school: "abjuration",
    castingTime: "Action",
    range: "Touch",
    duration: "8 hours",
    components: ["v", "s", "m"],
    material: "a piece of cured leather",
    flavor:
      "You maniest a magical leather armor that weighs as much as a feather.",
    description: [
      "The creature gain an Armor Base of 13 + its Dexterity Modifier.",
    ],
    atHigherLevels: addTarget(1),
    sources: ["arcane"],
    tags: ["buff"],
    group: "Mage Armor",
  },
  {
    name: "Longstrider",
    level: 1,
    school: "transmutation",
    castingTime: "Action",
    range: "Touch",
    duration: "1 hour",
    components: ["v", "s", "m"],
    material: "a pinch of dirt",
    flavor: "You enhance a creature's speed.",
    description: ["The creature's Speeds increase by 15 feet."],
    atHigherLevels: addTarget(1),
    sources: ["bard", "arcane", "primal"],
    tags: ["movement"],
    group: "Enhance Movement",
  },
  // {
  //   name: "Protection from Evil and Good",
  // },
  {
    name: "Mound of Stone",
    level: 1,
    school: "transmutation",
    castingTime: "Action",
    range: "60 feet",
    area: "5-foot-wide 10-foot-tall cylinder",
    duration: "1 minute",
    concentration: true,
    components: ["v", "s", "m"],
    material: "a rock, which the spell consumes",
    flavor:
      "A mound of stone rises from the ground, forming a unexpected obstacle.",
    description: [
      "A nonmagical structure of rough stone appears in an unoccupied space. It has AC 15 and 30 Hit Points.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "you create an additional structure and each structure gains 1 AC and 15 Hit Points."
    ),
    sources: ["druid", "arcane"],
    group: "Obstacle",
  },
  {
    name: "Purify Food and Drink",
    level: 1,
    school: "transmutation",
    castingTime: "Action",
    range: "Self",
    area: "5-foot radius sphere",
    ritual: true,
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "a clean piece of cloth",
    flavor: "You make food edible and water drinkable.",
    description: [
      "All nonmagical food and drink is rendered free of nonmagical poison, disease, contamination.",
      "Magical effects are cleared only if their spell level is lower than or equal to the spell slot used to cast this spell.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the radius of the sphere increases by 5 feet."
    ),
    sources: ["artificer", "divine", "primal"],
    // tags: ["utility"],
  },
  {
    name: "Ray of Sickness",
    level: 1,
    school: "necromancy",
    castingTime: "Action",
    range: "60 feet",
    duration: "Until the start of your next turn",
    components: ["v", "s"],
    flavor: "A ray of sickening greenish energy lashes out to sicken an enemy.",
    description: [
      "On a hit, the creature takes 3d8 poison damage and is Poisoned.",
      "On a miss, the creature takes half as much damage and isn't Poisoned.",
    ],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 1d8."),
    sources: ["arcane"],
    tags: ["ranged", "debuff"],
    damageTypes: ["poison"],
  },
  {
    name: "Sanctuary",
    level: 1,
    school: "abjuration",
    castingTime: "Bonus Action",
    range: "30 feet",
    duration: "1 minute",
    components: ["v", "s", "m"],
    material: "a small silver mirror",
    flavor: "You ward a creature against attacks.",
    description: [
      "A creature that tries to Attack or cast a Melee or Ranged spell against the warded creature must make a Wisdom Saving Throw. On a failed save, the creature must choose a new target or lose the Attack or spell.",
      "This spell doesn't protect the warded creature from Area of Effects.",
      "If the warded creature makes an Attack or casts a spell that affects an enemy creature, the spell ends.",
    ],
    savingThrow: "wis",
    atHigherLevels: addTarget(1),
    sources: ["artificer", "divine"],
    tags: ["buff"],
  },
  {
    name: "Searing",
    level: 1,
    school: "evocation",
    castingTime:
      "Bonus Action, taken immediately hitting a creature with a Melee Attack",
    range: "Self",
    duration: "1 minute",
    components: ["v"],
    flavor: "Your strike flares with white-hot intensity.",
    description: [
      "The creature takes 1d10 fire damage and ignites with magical flames. At the start of each of its turns, the creature takes 1d10 fire damage and can make a Constitution Saving Throw to end the spell.",
    ],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 1d10."),
    sources: ["paladin"],
    damageTypes: ["fire"],
    tags: ["melee"],
    group: "Smite",
  },
  {
    name: "Shield",
    level: 1,
    school: "abjuration",
    castingTime: "Reaction, taken right before you take damage",
    range: "Self",
    duration: "Until the start of your next turn",
    components: ["v", "s"],
    flavor: "You raise a magical barrier to protect yourself.",
    description: [
      "You have +2 bonus to AC.",
      "In addition, you take no damage from spells in the Magic Missile group.",
    ],
    atHigherLevels: forEachAboveDo(1, "the bonus to AC increases by 1."),
    sources: ["arcane"],
    group: "Barrier",
    tags: ["buff"],
  },
  // {
  //   name: "Shield of Faith",
  //   level: 1,
  //   school: "abjuration",
  //   castingTime: "Bonus Action",
  //   range: "60 feet",
  //   duration: "10 minutes",
  //   concentration: true,
  //   components: ["v", "s", "m"],
  //   material: "a small parchment with a bit of holy text written on it",
  //   flavor: "You protect a creature with a shimmering field of magic.",
  //   description: ["The creature gains a +2 bonus to AC."],
  //   sources: ["divine"],
  //   tags: ["buff"],
  // },
  {
    name: "Silent Image",
    level: 1,
    school: "illusion",
    castingTime: "Action",
    range: "120 feet",
    duration: "10 minutes",
    components: ["v", "s", "m"],
    material: "a bit of fleece",
    concentration: true,
    flavor:
      "You conjure a fake image that can be seen, but not touched, heard, or smelled.",
    description: [
      "You create a visual illusion that fits within a 15-foot cube.",
      "When you cast the spell, and then as an Action, you can move the illusion to any spot within range.",
      "Physical interaction with the image reveals it to be an illusion, because things can pass through it.",
      "If a creature uses its Action to examine the image, the creature can determine that it is an illusion with a successful Intelligence (Investigation) Check. If a creature discerns the illusion for what it is, the illusion becomes faint to the creature.",
    ],
    atHigherLevels: forEachAboveDo(1, "the duration increases by 10 minutes."),
    sources: ["bard", "arcane"],
    tags: ["summon"],
  },
  // {
  //   name: "Sleep",
  //   level: 1,
  //   school: "enchantment",
  //   castingTime: "Action",
  //   range: "90 feet",
  //   area: "20-foot-radius sphere",
  //   duration: "1 minute",
  //   components: ["v", "s", "m"],
  //   material: "a pinch of fine sand, rose petals, or a cricket",
  //   flavor: "You send creatures into a magical slumber.",
  //   description: [
  //     "Starting with the creature that has the lowest current Hit Points, each creature in the area falls unconscious until the spell ends, the sleeper takes damage, or someone uses an Action to shake or slap the sleeper awake.",
  //   ],
  //   atHigherLevels:
  //     "For each spell slot above 1st level, the Hit Points of the creatures that the spell can affect increases by 2d8.",
  //   sources: ["arcane"],
  //   tags: ["area", "control"],
  // },
  {
    name: "Snare",
    level: 1,
    school: "abjuration",
    castingTime: "1 minute",
    range: "Touch",
    area: "5-foot-radius circle",
    duration: "Until triggered or dispelled",
    components: ["v", "s", "m"],
    material: "25 feet of rope, which the spell consumes",
    ritual: true,
    flavor: "You create a magical trap that ensnares a creature.",
    description: [
      "You create a magical trap that is nearly invisible. It requires a successful Intelligence (Investigation) Check to be found.",
      "The trap triggers when a Small, Medium or Large creature moves into the area. The triggering creature must succeed on a Dexterity Saving Throw with Disadvantage or become Restrained and be hoisted into the air until it hangs upside down 3 feet above the protected surface.",
      "The Restrained creature can make a Dexterity saving throw with Disadvantage at the end of each of its turns to end the spell. Alternatively, another creature that can reach the Restrained creature can use an Action to make an Intelligence (Arcana) Check. On a success, the spell ends.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the radius of the circle increases by 5 feet."
    ),
    sources: ["arcane", "primal"],
    tags: ["area", "control"],
    savingThrow: "str",
  },
  {
    name: "Speak with Animals",
    level: 1,
    school: "divination",
    castingTime: "Action",
    range: "Self",
    duration: "10 minutes",
    ritual: true,
    components: ["v", "s"],
    flavor:
      "You gain the ability to comprehend and verbally communicate with animals.",
    description: [
      "You can ask questions of and receive answers from beasts. The beast's knowledge is limited by its Intelligence, but it can give you information about nearby locations and monsters, including whatever it can perceive or has perceived within the past day.",
    ],
    atHigherLevels: forEachAboveDo(1, "the duration doubles."),
    sources: ["primal"],
  },
  {
    name: "Stalaclites",
    level: 1,
    school: "evocation",
    castingTime: "Action",
    range: "60 feet",
    area: "5-foot-radius, 30-foot-high cylinder",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "You make sharp icicles fall from above.",
    description: [
      "On a hit, each creature takes 4d4 cold damage. On a miss, each creature takes only half as much damage.",
      "The cold freezes nonmagical liquids that isn't being worn or carried.",
    ],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 2d4."),
    sources: ["arcane"],
    tags: ["area"],
    damageTypes: ["cold"],
    savingThrow: "dex",
    group: "Elemental Burst",
  },
  {
    name: "Thunderous",
    level: 1,
    school: "evocation",
    castingTime:
      "Bonus Action, taken immediately hitting a creature with a Melee Attack",
    range: "Self",
    duration: "Instantaneous",
    components: ["v"],
    flavor: "Your strike rings with the sound of thunder.",
    description: [
      "The creature takes 2d8 thunder damage, it is pushed 10 feet away from you and is knocked Prone.",
      "This spell emits a thunderous boom audible out to 300 feet.",
    ],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 1d8."),
    sources: ["paladin"],
    damageTypes: ["thunder"],
    tags: ["melee"],
    group: "Smite",
  },
  {
    name: "Thunderwave",
    level: 1,
    school: "evocation",
    castingTime: "Action",
    range: "Self",
    area: "15-foot cube",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "You create a wave of thunderous force.",
    description: [
      "On a hit, each creature takes 2d8 thunder damage and is pushed 10 feet away from you. On a miss, each creature takes only half as much damage and isn't pushed.",
      "The spell emits a thunderous boom audible out to 300 feet.",
    ],
    atHigherLevels: forEachAboveDo(
      1,
      "the damage increases by 1d8 and the distance of the push increases by 5 feet."
    ),
    savingThrow: "con",
    tags: ["area", "control"],
    damageTypes: ["thunder"],
    group: "Elemental Burst",
    sources: ["arcane", "druid"],
  },
  // {
  //   name: "Unseen Servant",
  // },
  {
    name: "Witch Bolt",
    level: 1,
    school: "evocation",
    castingTime: "Action",
    range: "60 feet",
    duration: "1 minute",
    components: ["v", "s", "m"],
    material: "a twig from a tree that has been struck by lightning",
    concentration: true,
    flavor: "A beam of crackling blue energy lances out toward a creature.",
    description: [
      "The creature takes 1d20 lightning damage.",
      "On each of your turns, you can use your Action to deal 1d20 lightning damage to each affected creatures (no Test required).",
      "A creature dispells this effect on itself if it is ever outside the spell's range.",
    ],
    atHigherLevels: addTarget(1),
    sources: ["arcane"],
    group: "Elemental Burst",
    tags: ["ranged"],
    damageTypes: ["lightning"],
  },
  {
    name: "Wrathful",
    level: 1,
    school: "necromancy",
    castingTime:
      "Bonus Action, taken immediately hitting a creature with a Melee Attack",
    range: "Self",
    duration: "1 minute",
    components: ["v"],
    flavor: "Your strike channels divine wrath to make a creature shiver.",
    description: [
      "The creature takes 1d10 necrotic damage and is Frigthened by you. At the end of each of its turns, the creature can make a Wisdom Saving Throw to end the effect.",
    ],
    atHigherLevels: forEachAboveDo(1, "the damage increases by 1d10."),
    sources: ["paladin"],
    damageTypes: ["necrotic"],
    tags: ["melee"],
    group: "Smite",
  },
  // {
  //   name: "Zephyr Strike",
  // },
  {
    name: "Acid Arrow",
    level: 2,
    school: "conjuration",
    castingTime: "Action",
    range: "180 feet",
    area: "10-foot-radius sphere",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "powdered acidic herbs and a snake's stomach",
    flavor:
      "A shimmering green arrow streaks shoots in an instant and splashes on impact.",
    description: [
      "On a hit, each creature takes 4d4 acid damage and an additional 4d4 acid damage at the end of its next turn. On a miss, each creature takes only half as much damage and no additional damage.",
    ],
    atHigherLevels: forEachAboveDo(
      2,
      "the initial and the additional damage increase by 1d4."
    ),
    sources: ["arcane"],
    damageTypes: ["acid"],
    group: "Elemental Burst",
    tags: ["area"],
    savingThrow: "dex",
  },
  {
    name: "Aid",
    level: 2,
    school: "abjuration",
    castingTime: "1 minute",
    range: "Touch",
    duration: "8 hours",
    components: ["v", "s", "m"],
    material: "a bolt of afforable cloth, which the spell consumes",
    flavor: "You bolster your allies with toughness and resolve.",
    description: [
      "Up to three creatures' Hit Points and maximum Hit Points increase by 1d6.",
    ],
    atHigherLevels: forEachAboveDo(
      2,
      "the Hit Points and maximum Hit Points increase by 1d6."
    ),
    sources: ["divine"],
    tags: ["buff"],
  },
  {
    name: "Air Bubble",
    level: 2,
    school: "conjuration",
    castingTime: "Action",
    range: "Touch",
    duration: "3 hours",
    components: ["s"],
    flavor:
      "You create a bubble of renewable clean air around a creature's head.",
    description: ["The creature can breathe normally in any environment."],
    atHigherLevels: forEachAboveDo(
      2,
      "you can target one additional creature and the spell's duration doubles (maximum 24 hours)."
    ),
    sources: ["arcane", "primal"],
    tags: ["buff"],
  },
  // {
  //   name: "Alter Self",
  // },
  {
    name: "Arcane Lock",
    level: 2,
    school: "abjuration",
    castingTime: "Action",
    range: "Touch",
    duration: "Until dispelled",
    components: ["v", "s", "m"],
    material: "an expensive amount of a powdered precious metal",
    flavor: "You magically lock a door, chest, or other entryway.",
    description: [
      "The object is locked and can't be unlocked or broken except by magical means.",
      "You can also set a password that, when spoken within 5 feet of the object, suppresses the spell for 1 minute.",
      "**Note.** Casting the Knock spell on the object suppresses the lock for 10 minutes.",
    ],
    sources: ["arcane"],
    // tags: ["utility"],
  },
  {
    name: "Augury",
    level: 2,
    school: "divination",
    castingTime: "1 minute",
    range: "Self",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "specially marked sticks, bones, or similar tokens",
    ritual: true,
    flavor: "You receive an omen from an otherworldly entity.",
    description: [
      "You receive an omen about the results of a specific course of action that you plan to take within the next 30 minutes.",
      "Casting this spell more than once before completing a Long Rest incurs a cumulative 25% chance of receiving a random reading.",
    ],
    sources: ["cleric"],
    atHigherLevels: forEachAboveDo(
      2,
      "the time frame for the course of action doubles (maximum 8 hours)."
    ),
    // tags: ["utility"],
  },
  {
    name: "Barkskin",
    level: 2,
    school: "transmutation",
    castingTime: "Action",
    range: "Touch",
    duration: "1 hour",
    components: ["v", "s", "m"],
    material: "a handful of strong bark chips",
    concentration: true,
    flavor:
      "Skin is an inconveniences. You can shape it to become rough and tough.",
    description: ["The creature gains an Armor Base of 16."],
    atHigherLevels: addTarget(2),
    sources: ["primal"],
    tags: ["buff"],
    group: "Ecomorph",
  },
  {
    name: "Blur",
    level: 2,
    school: "illusion",
    castingTime: "Action",
    range: "Self",
    duration: "1 minute",
    components: ["v"],
    concentration: true,
    flavor: "Your form becomes blurred and shifting.",
    description: [
      "Attackers that rely on sight have Disadvantage on Melee or Ranged Attack Rolls and Spellcasting Attempts against the creature.",
    ],
    atHigherLevels: addTarget(2),
    sources: ["arcane"],
    tags: ["buff"],
  },
  // {
  //   name: "Borrowed Knowledge",
  // },
  {
    name: "Calm Emotions",
    level: 2,
    school: "enchantment",
    castingTime: "Action",
    range: "60 feet",
    area: "20-foot-radius sphere",
    duration: "1 minute",
    concentration: true,
    components: ["v", "s"],
    flavor: "You attempt to suppress strong emotions in a group of people.",
    description: [
      "Choose any number of the following effects:",
      "- Humanoids immediately lose the Charmed and Frightened conditions.",
      "- Humanoids that are hostile to each other become indifferent.",
      "- Humanoids that are indifferent to each other become friendly.",
    ],
    sources: ["bard", "cleric"],
    atHigherLevels: forEachAboveDo(2, "the range of the spell doubles."),
    tags: ["buff", "debuff"],
    group: "Vigor",
  },
  {
    name: "Cloud of Daggers",
    level: 2,
    school: "conjuration",
    castingTime: "Action",
    range: "60 feet",
    area: "5-foot cube",
    duration: "1 minute",
    concentration: true,
    components: ["v", "s", "m"],
    material: "slivers of glass",
    flavor: "You fill the air with spinning daggers.",
    description: [
      "A creature takes 6d4 slashing damage when it enters the area for the first time on a turn or if it starts its turn there.",
    ],
    atHigherLevels: forEachAboveDo(2, "the spell's damage increases by 3d4"),
    damageTypes: ["slashing"],
    sources: ["bard", "arcane"],
    tags: ["area"],
  },
  {
    name: "Continual Flame",
    level: 2,
    school: "evocation",
    castingTime: "Action",
    range: "Touch",
    duration: "Until dispelled",
    components: ["v", "s", "m"],
    material: "a pricy amount of ruby dust, which the spell consumes",
    ritual: true,
    flavor: "You create a flame that can't be extinguished.",
    description: [
      "You create a flame that can't be extinguished by nonmagical means. It sheds bright light in a 20-foot radius and dim light for an additional 20 feet.",
      "The flame doesn't consume fuel and doesn't produce heat. It can be covered or hidden but not smothered or quenched.",
    ],
    atHigherLevels: forEachAboveDo(
      2,
      "the spell costs twice as much material, and the bright and dim light radius increase by 10 feet."
    ),
    sources: ["arcane"],
    // tags: ["utility"],
  },
  // {
  //   name: "Cordon of Arrows",
  // },
  {
    name: "Crown of Madness",
    level: 2,
    school: "enchantment",
    castingTime: "Action",
    range: "120 feet",
    duration: "1 minute",
    components: ["v", "s"],
    concentration: true,
    flavor:
      "A twisted crown of jagged iron appears on a creature's head and a madness glows in its eyes.",
    description: [
      "The creature is Charmed by you.",
      "The creature must use its Action before moving on each of its turns to make a Melee Attack against a creature other than itself that you mentally choose. It can act normally if you don't designate a creature or if there are none within its reach.",
      "Each turn, you must use an Action to maintain control over the creature, or the spell ends.",
      "At the end of each of its turns, the creature can roll a Wisdom Saving Throw, ending the effect on itself on a success.",
    ],
    atHigherLevels: addTarget(2),
    savingThrow: "wis",
    tags: ["debuff", "control"],
    sources: ["bard", "arcane"],
  },
  {
    name: "Darkness",
    level: 2,
    school: "evocation",
    castingTime: "Action",
    range: "60 feet",
    area: "15-foot-radius sphere",
    duration: "10 minutes",
    concentration: true,
    components: ["v", "m"],
    material: "bat fur and a drop of pitch or piece of coal",
    flavor: "You create a sphere of magical darkness.",
    description: [
      "The area is Heavily Obscured. It blocks all light, magical or otherwise, and creatures with Darkvision can't see through it.",
      "If you choose an object as the source, the darkness moves with it. Covering the source of the darkness with an opaque object, blocks the darkness.",
      "You can choose a creature as the source. At the end of each of its turns, the creature can roll a Wisdom Saving Throw, ending the spell on a success.",
      "If any of the spell's area overlaps with an area of light created by a spell of 2nd level or lower, the spell that created the light is dispelled.",
    ],
    atHigherLevels: forEachAboveDo(
      2,
      "the radius of the sphere increases by 5 feet."
    ),
    sources: ["arcane"],
    // tags: ["utility"],
    savingThrow: "wis",
  },
  {
    name: "Darkvision",
    level: 2,
    school: "transmutation",
    castingTime: "Action",
    range: "Touch",
    duration: "8 hours",
    components: ["v", "s", "m"],
    material: "either a pinch of dried root or an agate",
    flavor: "Your eyes become see no difference between light and darkness.",
    description: ["The creature gains Darkvision out to a range of 60 feet."],
    atHigherLevels: forEachAboveDo(
      2,
      "the range of the Darkvision increases by 30 feet."
    ),
    sources: ["arcane", "primal"],
    tags: ["buff"],
  },
  {
    name: "Deprivation",
    level: 2,
    school: "necromancy",
    castingTime: "Action",
    range: "30 feet",
    duration: "1 minute",
    components: ["v"],
    flavor: "You rip a creature of one of its senses.",
    description: [
      "The creature becomes Blinded, Deafened or Numb (your choice).",
      "The creature can roll a Constitution Saving Throw at the end of each of its turns, ending the effect on itself on a success.",
    ],
    atHigherLevels: addTarget(2),
    sources: ["bard", "arcane"],
    tags: ["debuff"],
    savingThrow: "con",
  },
  // {
  //   name: "Detect Thoughts",
  //   level: 2,
  //   school: "divination",
  //   castingTime: "Action",
  //   range: "Self",
  //   area: "30-foot-radius sphere",
  //   duration: "1 minute",
  //   concentration: true,
  //   components: ["v", "s", "m"],
  //   material: "a chunk of copper",
  // },
  // {
  //   name: "Dragon's Breath",
  // },
  {
    name: "Earthbind",
    level: 2,
    school: "transmutation",
    castingTime: "Action",
    range: "300 feet",
    duration: "1 minute",
    components: ["v"],
    concentration: true,
    flavor: "You cause a creature to fall to the ground.",
    description: [
      "The creature's Flying Speed becomes 0 feet. If it is in the air, it descends safely to the ground at the rate of 60 feet per round.",
    ],
    atHigherLevels: addTarget(2),
    sources: ["arcane", "primal"],
    tags: ["control"],
    savingThrow: "str",
  },
  // {
  //   name: "Enhance Ability",
  //   level: 2,
  //   school: "transmutation",
  //   castingTime: "Action",
  //   range: "Touch",
  //   duration: "1 hour",
  //   components: ["v", "s", "m"],
  //   material: "fur or a feather from a beast",
  //   concentration: true,

  // },
  // {
  //   name: "Enlarge/Reduce",
  // },
  {
    name: "Enthrall",
    level: 2,
    school: "enchantment",
    castingTime: "Action",
    range: "Self",
    area: "60-foot-radius sphere",
    duration: "1 minute",
    components: ["v", "s"],
    flavor:
      "You weave a distracting string of words to become the center of attention.",
    sources: ["bard", "warlock"],
    description: [
      "Creatures that can't be Charmed or can't hear you are Immune to this spell.",
      "Choose any number of creatures. They each roll Wisdom (Percetion) Checks with Disadvantage to perceive any creature other than you.",
      "The spell ends if you can't speak or if you are Incapacitated.",
    ],
    savingThrow: "wis",
    group: "Artistry",
    tags: ["debuff"],
  },
  {
    name: "Earthen Grasp",
    level: 2,
    school: "transmutation",
    castingTime: "Action",
    range: "60 feet",
    area: "5-foot square",
    duration: "1 minute",
    concentration: true,
    components: ["v", "s", "m"],
    material: "a miniature hand sculpted from clay",
    flavor: "A hand of soil and stone reaches for a creature.",
    description: [
      "Choose an unoocupied space. A Medium hand made of compacted soil rises there and reaches for a creature within 5 feet of it. The creature takes 2d8 bludgeoning damage and is Restrained. On subsequent turns, you can use your Action to cause the hand to crush the Restrained creature again, dealing 2d8 bludgeoning damage.",
      "As an Action, you can also roll another Spellcasting Attempt to cause the hand to reappear elsewhere and renew the spell.",
      "At the end of each of its turns, the Restrained creature can roll a Strength Saving Throw, ending the effect on itself on a success.",
    ],
    atHigherLevels: forEachAboveDo(2, "the damage increases by 1d8."),
    savingThrow: "str",
    sources: ["arcane", "primal"],
    group: "Shape Nature",
  },
  {
    name: "Earworm",
    level: 2,
    school: "abjuration",
    castingTime: "Reaction, taken when you are subjected to a harmful effect",
    range: "Self",
    duration: "1 round",
    components: ["v"],
    flavor:
      "You protect your ming with a wall of repetitive thoughts or sounds.",
    description: [
      "You have advantage on Intelligence, Wisdom, and Charisma Saving Throws. Moreover, you are Resistant to psychic damage.",
    ],

    atHigherLevels: forEachAboveDo(
      2,
      "you can have another creature within 5 feet of you benefit from this spell."
    ),
    sources: ["bard", "arcane"],
    tags: ["buff"],
    group: "Barrier",
  },
  // {
  //   name: "Find Steed"
  // },
  // {
  //   name: "Find Traps"
  // },
  {
    name: "Flame Blade",
    level: 2,
    school: "conjuration",
    castingTime: "Bonus Action",
    range: "Self",
    duration: "10 minutes",
    components: ["v", "s", "m"],
    material: "a leaf of sumac",
    concentration: true,
    flavor: "You materialize a blade of fire the size and shape of a scimitar.",
    description: [
      "The blade is a Melee weapon with which you are proficient. It deals 3d6 fire damage (no Ability Modifier) on a hit.",
      "Attack Rolls with the blade can be made using your Spellcasting Ability Modifier.",
      "The blade sheds light in a 40-foot radius.",
      "If another creature uses grabs the blade, the spell ends.",
    ],
    damageTypes: ["fire"],
    atHigherLevels: forEachAboveDo(2, "the damage increases by 1d6."),
    sources: ["druid"],
    tags: ["melee"],
  },
  {
    name: "Flaming Sphere",
    level: 2,
    school: "conjuration",
    castingTime: "Action",
    range: "60 feet",
    area: "5-foot-diameter sphere",
    flavor: "You conjure a rolling sphere of fire.",
    duration: "1 minute",
    components: ["v", "s", "m"],
    material:
      "a bit of tallow, a pinch of brimstone, and a dusting of powdered iron",
    concentration: true,
    description: [
      "You create a sphere of fire in an unoccupied space.",
      "When you cast this spell, you can move the sphere up to 30 feet. If you ram the sphere into a creature, it takes 2d8 fire damage. On subsequent turns, you can use a Bonus Action to move the sphere again and roll another Spellcasting Attempt to ram the sphere into a creature.",
      "Any creature that ends its turn within 5 feet of the sphere must make a Dexterity Saving Throw. On a failed save, the creature takes 2d8 fire damage.",
      "When you move the sphere, you can direct it over barriers up to 5 feet tall and jump it across pits up to 10 feet wide.",
      "The sphere ignites flammable objects not being worn or carried and sheds light in a 40-foot radius.",
    ],
    atHigherLevels: forEachAboveDo(2, "the damage increases by 1d8."),
    savingThrow: "dex",
    group: "Elemental Burst",
    sources: ["arcane", "druid"],
    damageTypes: ["fire"],
  },
  {
    name: "Firm Shell",
    level: 2,
    school: "transmutation",
    castingTime: "Action",
    range: "Touch",
    duration: "1 hour",
    components: ["v", "s", "m"],
    material: "a chunk of marble or limestone",
    concentration: true,
    flavor:
      "Skin is soft and remains wounded way too long. You know how to solve this.",
    description: [
      "The creature gains an Armor Base of 14 + its Dexterity Modifier (max. 2), and gains a number of Resilience Points equal to your Spellcasting Ability Modifier.",
      "The creature can also use its Bonus Action to gain a number of Resilience Points equal to your Spellcasting Ability Modifier.",
    ],
    atHigherLevels: addTarget(2),
    sources: ["primal"],
    tags: ["buff"],
    group: "Ecomorph",
  },
  // {
  //   name: "Flock of Familiars",
  // },
  // {
  //   name: "Fortune's Favor"
  // },
  {
    name: "Gentle Repose",
    level: 2,
    school: "necromancy",
    castingTime: "Action",
    range: "Touch",
    duration: "10 days",
    components: ["v", "s", "m"],
    material: "a pinch of salt, vinegar and a strong spice",
    flavor: "You slow a corpse's rate of decay.",
    description: [
      "A Dead creature can't decay and magic that would make it become Undead fails.",
    ],
    atHigherLevels: forEachAboveDo(2, "the duration doubles."),
    sources: ["divine", "wizard"],
  },
  {
    name: "Gust of Wind",
    level: 2,
    school: "evocation",
    castingTime: "Action",
    range: "Self",
    area: "60-foot-long, 10-foot-wide line",
    duration: "1 minute",
    components: ["v", "s", "m"],
    material: "a legume seed",
    concentration: true,
    flavor: "You generate a strong column of wind.",
    description: [
      "Each creature that starts its turn in the area must succeed on a Strength Saving Throw or be pushed 15 feet away from you.",
      "Any creature in the line must spend 2 feet of movement for every 1 foot it moves when moving closer to you.",
      "Once per round on your turn, you can change the direction in which the line blasts from you.",
    ],
    atHigherLevels: forEachAboveDo(
      2,
      "the line's length increases by 30 feet."
    ),
    sources: ["arcane", "primal"],
    group: "Weather",
    tags: ["area", "control"],
    savingThrow: "str",
  },
  {
    name: "Healing Spirit",
    level: 2,
    school: "conjuration",
    castingTime: "Bonus Action",
    range: "60 feet",
    area: "5-foot cube",
    duration: "1 minute",
    components: ["v", "s"],
    concentration: true,
    flavor: "You conjure an intangible beast spirit that heals the wounded.",
    description: [
      "When a creature that moves into the area for the first time on a round or starts its turn there, you can restore 1d6 hit points to that creature (no Action required).",
      "The spirit can heal a number of times equal to 1 + your Spellcasting Ability Modifier (minimum of twice). After that, the spell ends.",
      "You can use your Bonus Action to move the spirit up to 60 feet.",
    ],
    atHigherLevels: forEachAboveDo(2, "the healing increases by 1d6."),
    sources: ["primal"],
    tags: ["area", "heal"],
  },
  {
    name: "Heat Metal",
    level: 2,
    school: "transmutation",
    castingTime: "Action",
    range: "60 feet",
    duration: "1 minute",
    components: ["v", "s", "m"],
    material: "a piece of iron and a flame",
    concentration: true,
    flavor:
      "You raise the temperature of a metal object to an unbearable level.",
    description: [
      "A manufactured metal object (such as a metal weapon or a suit of metal armor) becomes red hot. Any creature in physical contact with the object takes 2d8 fire damage when you cast the spell.",
      "On subsequent turns, you can use a Bonus Action to cause this damage again.",
      "If a creature is holding or wearing the object and takes the damage from it, the creature must succeed on a Constitution Saving Throw or drop the object if it can. If it can't drop the object, it has Disadvantage on D20 Tests that aren't Saving Throws until the start of your next turn.",
    ],
    atHigherLevels: forEachAboveDo(2, "the damage increases by 1d8."),
    sources: ["artificer", "bard", "druid"],
    damageTypes: ["fire"],
    savingThrow: "con",
    tags: ["debuff"],
  },
  {
    name: "Hold Person",
    level: 2,
    school: "enchantment",
    castingTime: "Action",
    range: "60 feet",
    duration: "1 minute",
    components: ["v", "s", "m"],
    material: "a small, straight piece of iron",
    concentration: true,
    flavor: "You paralyze a humanoid creature.",
    description: [
      "The creature become Paralyzed.",
      "The creature can roll a Wisdom Saving Throw at the end of each of its turns, ending the effect on itself on a success.",
    ],
    atHigherLevels: addTarget(2),
    sources: ["bard", "cleric", "druid", "arcane"],
    tags: ["control"],
    savingThrow: "wis",
  },
  {
    name: "Immovable Object",
    level: 2,
    school: "transmutation",
    castingTime: "Action",
    range: "Touch",
    duration: "1 hour",
    components: ["v", "s", "m"],
    material:
      "an affordable amount of a precious metal, which the spell consumes",
    flavor: "You make an object impossible to move.",
    description: [
      "An object weighing no more than 10 pounds becomes fixed in space. If the object is fixed mid-air, it can hold up to 4000 pounds of weight before it falls.",
      "When you cast the spell, you can designate a password that, when spoken within 5 feet of the object, suppresses the spell for 1 minute. You can also designate creatures that can always move the object.",
      "Any creature can attempts a Strength (Smashing) Check with Disadvantage to move the object 10 feet.",
    ],
    atHigherLevels: `${forEachAboveDo(
      2,
      "the weight limit and the duration double."
    )} When using a 5th-level spell slot or higher, the spell becomes permanent."`,
    // tags: ["utility"],
    sources: ["arcane"],
  },
  {
    name: "Invisibility",
    level: 2,
    school: "illusion",
    castingTime: "Action",
    range: "Touch",
    duration: "1 hour",
    components: ["v", "s", "m"],
    material: "an eyelash encased in gum arabic",
    concentration: true,
    flavor: "In a unexpected plot twist, you seem to vanish from existence.",
    description: [
      "The creature and its belongings become Invisible.",
      "The spell ends for a creature when it rolls an Attack or a Spellcasting Attempt.",
    ],
    atHigherLevels: addTarget(2),
    sources: ["bard", "arcane"],
    tags: ["buff"],
  },
  {
    name: "Kinetic Jaunt",
    level: 2,
    school: "transmutation",
    castingTime: "Bonus Action",
    range: "Touch",
    duration: "1 minute",
    components: ["s"],
    concentration: true,
    flavor: "You empower your movement with dancelike steps.",
    description: [
      "The creature gains the following benefits:",
      "- Its walking Speed increases by 10 feet.",
      "- It doesn't provoke Opportunity Attacks.",
      "- It can move through the space of any other creature, and its space doesn't count as difficult terrain.",
    ],
    atHigherLevels: addTarget(2),
    sources: ["bard"],
    tags: ["buff"],
    group: "Artistry",
  },
  {
    name: "Knock",
    level: 2,
    school: "transmutation",
    castingTime: "Action",
    range: "60 feet",
    duration: "Instantaneous",
    components: ["v"],
    flavor: "Nothing can keep you out.",
    description: [
      "An object such as a door, box, chest, or set of manacles becomes unlocked, unstuck, or unbarred.",
      "If the lock magic, this spell suppresses it for only 10 minutes.",
    ],
    atHigherLevels: forEachAboveDo(2, "the range of the spell doubles."),
    sources: ["arcane"],
    // tags: ["utility"],
  },
  {
    name: "Lesser Restoration",
    level: 2,
    school: "abjuration",
    castingTime: "Action",
    range: "Touch",
    duration: "Instantaneous",
    components: ["v", "s"],
    flavor: "You restore a creature's vitality.",
    description: [
      "You end a disease or one following conditions on the creature: Blinded, Brittle, Deafened, Disgusted, Numb, Paralyzed, Poisoned, Vulnerable or Weak.",
    ],
    atHigherLevels: forEachAboveDo(
      2,
      "you can target one additional creature."
    ),
    sources: ["cleric"],
    tags: ["heal"],
    group: "Vigor",
  },
  {
    name: "Levitate",
    level: 2,
    school: "transmutation",
    castingTime: "Action",
    range: "60 feet",
    duration: "10 minutes",
    concentration: true,
    components: ["v", "s", "m"],
    material:
      "either a small leather loop or a piece of golden wire bent into a cup shape",
    flavor: "You make a creature float in the air.",
    description: [
      "The creature rises vertically up to 20 feet and remains suspended mid-air. It can move horizontally only by pushing or pulling against fixed objects or surfaces. On subsequent turns, you can use move the creature up or down 20 feet (no Action required).",
      "The spell can levitate a creature that weighs up to 500 pounds.",
      "When the spells ends, the creature falls slowly to the ground.",
    ],
    atHigherLevels: forEachAboveDo(
      2,
      "the weight limit doubles and the height increases by 20 feet."
    ),
    sources: ["arcane"],
    savingThrow: "con",
    group: "Gravity",
    tags: ["control", "movement"],
  },
  {
    name: "Locate Animals or Plants",
    level: 2,
    school: "divination",
    castingTime: "Action",
    range: "Self",
    area: "5-mile radius",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "a bit of fur from a bloodhound",
    ritual: true,
    flavor:
      "Concentrating on the voice of nature in your surroundings, you feel closer to a natural entity.",
    description: [
      "Describe or name a specific kind of beast or plant. If anything matches your description, you learn the direction and distance to the closest one around you.",
    ],
    atHigherLevels: forEachAboveDo(2, "the range of the spell doubles."),
    sources: ["primal"],
    tags: ["area" /*"utility"*/],
    group: "Beast Bond",
  },
  {
    name: "Locate Object",
    level: 2,
    school: "divination",
    castingTime: "Action",
    range: "Self",
    area: "1000-foot radius",
    duration: "10 minutes",
    concentration: true,
    components: ["v", "s", "m"],
    material: "a forked twig",
    flavor: "You sense the presence of a specific object.",
    description: [
      "Describe or name an object that is familiar to you or a type of object. If the object is within range, you learn the direction and distance to the object and whether it is moving.",
      "**Special.** You cannot locate an object if any thickness of lead, even a thin sheet, blocks a direct path between you and the object.",
    ],
    atHigherLevels: forEachAboveDo(2, "the range of the spell doubles."),
    sources: ["arcane", "divine", "primal"],
    tags: ["area" /*"utility"*/],
  },
  {
    name: "Magic Mouth",
    level: 2,
    school: "illusion",
    castingTime: "Action",
    range: "30 feet",
    duration: "Until dispelled",
    ritual: true,
    components: ["v", "s", "m"],
    material:
      "an afforable amount of honeycomb and powdered precious stone, which the spell consumes",
    flavor: "You implant a message to be delivered at a time of your choosing.",
    description: [
      "Choose an object and speak a message that lasts 6 seconds at most. Then, choose a trigger condition that will cause the spell to deliver the message.",
      "When the trigger condition is met, a mouth appears on the object and speaks the message in your voice, with the same volume as you spoke.",
      "When you cast the spell, you can choose whether the spell ends once the message is delivered or if it should repeat whenever the trigger condition is met.",
    ],
    atHigherLevels: forEachAboveDo(
      2,
      "the maximum length of the message doubles (the casting time changes accordingly)."
    ),
    sources: ["arcane"],
    // tags: ["utility"],
  },
  {
    name: "Fake Aura",
    level: 2,
    school: "illusion",
    castingTime: "Action",
    range: "Touch",
    duration: "24 hours",
    components: ["v", "s", "m"],
    material: "a small square of silk",
    flavor: "You create magical false tracks against nosy foes.",
    description: [
      "A creature or object gains a magical aura that reveals false information to divination spells that are cast on it. You choose the type of misinformation that the aura provides.",
    ],
    atHigherLevels: forEachAboveDo(
      2,
      "the duration of the spell doubles. When using a 5th-level spell slot or higher, the spell becomes permanent."
    ),
    sources: ["arcane"],
  },
  {
    name: "Magic Weapon",
    level: 2,
    school: "transmutation",
    castingTime: "Bonus Action",
    range: "Touch",
    duration: "1 hour",
    concentration: true,
    components: ["v", "s"],
    flavor: "You enchant a weapon to be more effective.",
    description: [
      "The weapon becomes magical if it isn't already. Attack Rolls with the weapon have a +1 bonus to Attack Rolls and damage rolls.",
    ],
    atHigherLevels:
      "When you cast this spell using a spell slot of 4th level or higher, the bonus increases to +2.",
    sources: ["arcane", "ranger", "paladin"],
    tags: ["buff"],
    group: "Craft",
  },
  {
    name: "Mental Exhaustion",
    level: 2,
    school: "enchantment",
    castingTime: "Action",
    range: "60 feet",
    duration: "Until the start of your next turn",
    components: ["v", "s"],
    flavor: "You overload a creature's mind with too much information.",
    description: ["The creature takes 3d8 psychic damage and becomes Dazed."],
    atHigherLevels: addTarget(2),
    savingThrow: "int",
    sources: ["bard", "arcane"],
    tags: ["debuff"],
    damageTypes: ["psychic"],
    group: "Psychic Assault",
  },
  {
    name: "Messenger",
    level: 2,
    school: "enchantment",
    castingTime: "Action",
    range: "30 feet",
    duration: "24 hours",
    components: ["v", "s", "m"],
    material: "a morsel of food",
    flavor: "You compel a Tiny beast to deliver a message.",
    ritual: true,
    description: [
      "Speak a message of up to 25 words to a Tiny beast within range. The beast travels for the duration of the spell to a location you describe, and then it delivers the message to a creature you can describe. The message is delivered with your voice.",
      "A flying beast messenger can typically travel 100 miles in 24 hours, while a walking messenger can travel 20 miles in 24 hours.",
    ],
    atHigherLevels: forEachAboveDo(2, "the range of the spell triples."),
    sources: ["bard", "primal"],
    group: "Beast Bond",
  },
  {
    name: "Mind Spike",
    level: 2,
    school: "divination",
    castingTime: "Action",
    range: "60 feet",
    components: ["s"],
    concentration: true,
    duration: "1 hour",
    flavor: "You reach into the mind of a creature and pierce it painfully.",
    description: [
      "On a hit, the creature takes 3d10 psychic damage and you can mentally keep track of its precise location over any distance while it is on the same plane of existence (it doesn't benefit from being Invisible against you). On a miss, the creature takes half as much damage and you can't track its location.",
      "**Special.** You can forgo the damage of this spell.",
    ],
    atHigherLevels: forEachAboveDo(
      2,
      "the damage increases by 1d10 and the duration doubles. When using a 5th-level spell slot or higher, the spell becomes permanent."
    ),
    sources: ["arcane"],
    savingThrow: "wis",
    damageTypes: ["psychic"],
    tags: ["debuff"],
    group: "Psychic Assault",
  },
  //   {
  //     name: "Mirror Image",
  //   },
  {
    name: "Misty Step",
    level: 2,
    school: "conjuration",
    castingTime: "Bonus Action",
    range: "Self",
    components: ["v"],
    duration: "Instantaneous",
    flavor: "You are briefly surrounded by a silvery mist.",
    description: ["You teleport up to 30 feet to an unoccupied space."],
    atHigherLevels: forEachAboveDo(
      2,
      "the distance of the teleport increases by 15 feet."
    ),
    sources: ["arcane"],
    tags: ["movement"],
    group: "Teleportation",
  },
  //   {
  //     name: "Moonbeam",
  //   },
  {
    name: "Scorcher",
    level: 2,
    school: "evocation",
    castingTime: "Action",
    range: "Self",
    area: "30-foot long, 5-foot wide line",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "a red scale",
    flavor: "You create a line of roaring flame.",
    description: [
      "On a hit, each creature takes 4d8 fire damage. On a miss, each creature takes half as much damage.",
    ],
    atHigherLevels: forEachAboveDo(
      2,
      "the damage increases by 1d8 and the length of the line increases by 30 feet."
    ),
    savingThrow: "dex",
    damageTypes: ["fire"],
    tags: ["area"],
    sources: ["arcane"],
    group: "Elemental Burst",
  },
  {
    name: "Senses",
    level: 2,
    school: "divination",
    castingTime: "Action",
    range: "Touch",
    duration: "1 hour",
    components: ["s"],
    concentration: true,
    ritual: true,
    flavor: "You see, hear, and smell through a beast's senses.",
    description: [
      "You can use your Action to experience the senses of a beast. You continue to do so until you use your Action to return to your own senses.",
    ],
    atHigherLevels: forEachAboveDo(2, "the duration doubles."),
    sources: ["primal"],
    // tags: ["utility"],
    group: "Beast Bond",
  },
  {
    name: "Shatter",
    level: 2,
    school: "evocation",
    castingTime: "Action",
    range: "60 feet",
    area: "10-foot-radius sphere",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "a chip of mica",
    flavor:
      "A sudden loud ringing noise, painfully intense, erupts out of nowhere.",
    description: [
      "Each creature takes 3d8 thunder damage and is pushed 10 feet away from the center of the sphere. On a miss, each creature takes half as much damage and isn't pushed.",
      "Creatures made of inorganic materials such as stone, crystal, or metal are Vulnerable to this damage.",
    ],
    atHigherLevels: forEachAboveDo(
      2,
      "the damage increases by 1d8 and the radius of the sphere increases by 5 feet."
    ),
    damageTypes: ["thunder"],
    sources: ["arcane"],
    group: "Elemental Burst",
    tags: ["area", "control"],
    savingThrow: "con",
  },
  {
    name: "Shining",
    level: 2,
    school: "evocation",
    castingTime:
      "Bonus Action, taken immediately hitting a creature with a Melee Attack",
    range: "Self",
    duration: "1 minute",
    concentration: true,
    components: ["v"],
    flavor: "Your weapon gleams with astral radiance.",
    description: [
      "The creature takes 2d8 radiant damage and can't benefit from the Invisible condition.",
      "The creature sheds light in a 10-foot radius.",
      "Attack Rolls and Melee or Ranged Spellcasting Attempts against the creature have Advantage if the attacker can see them.",
    ],
    atHigherLevels: forEachAboveDo(2, "the damage increases by 1d8."),
    sources: ["paladin"],
    damageTypes: ["radiant"],
    tags: ["melee"],
    group: "Smite",
  },
  {
    name: "Tornado",
    level: 2,
    school: "conjuration",
    castingTime: "Action",
    range: "60 feet",
    area: "5-foot-radius sphere",
    duration: "1 minute",
    components: ["v", "s", "m"],
    material: "a pinch of dust",
    concentration: true,
    flavor: "A potent whirlwind pushes creatures outwards.",
    description: [
      "A creature that starts its turn within the area or enters it must succeed on a Strength Saving Throw or be pushed 10 feet away from the center of the area and is knocked Prone.",
    ],
    atHigherLevels: forEachAboveDo(
      2,
      "the radius of the sphere and the distance of the push increase by 5 feet."
    ),
    sources: ["primal"],
    tags: ["area", "control"],
    group: "Weather",
    savingThrow: "str",
  },
  {
    name: "Acidic Rain",
    level: 3,
    school: "evocation",
    castingTime: "Action",
    range: "150 feet",
    area: "15-foot-radius, 60-foot high cylinder",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "a phial of acid",
    flavor: "Sizzling rain falls from above.",
    description: [
      "On a hit, each creature takes 6d4 acid damage and becomes Brittle until the start of your next turn. On a miss, each creature takes half as much damage and isn't Brittle.",
    ],
    damageTypes: ["acid"],
    atHigherLevels: forEachAboveDo(
      3,
      "the damage increases by 1d4 and the radius increases by 5 feet."
    ),
    savingThrow: "con",
    sources: ["arcane"],
    group: "Elemental Torrent",
    tags: ["area"],
  },
  {
    name: "Fireball",
    level: 3,
    school: "evocation",
    castingTime: "Action",
    range: "150 feet",
    area: "15-foot-radius sphere",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "a tiny ball of bat guano and sulfur",
    flavor:
      "A bright streak flashes from your pointing finger into the distance and then blossoms with a low roar into an explosion of flame.",
    description: [
      "On a hit, each creature takes 8d6 fire damage. On a miss, each creature takes half as much damage.",
    ],
    damageTypes: ["fire"],
    atHigherLevels: forEachAboveDo(
      3,
      "the damage increases by 1d6 and the radius of the sphere increases by 5 feet."
    ),
    savingThrow: "dex",
    sources: ["arcane"],
    group: "Elemental Torrent",
    tags: ["area"],
  },
  {
    name: "Lightning Bolt",
    level: 3,
    school: "evocation",
    castingTime: "Action",
    range: "Self",
    area: "120-foot-long, 5-foot-wide line",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "a bit of fur and a rod of amber, crystal, or glass",
    flavor: "A stroke of lightning blasts straight out of you.",
    description: [
      "On a hit, each creature takes 5d12 lightning damage. On a miss, each creature takes half as much damage.",
    ],
    damageTypes: ["lightning"],
    atHigherLevels: forEachAboveDo(
      3,
      "you can evoke an additional line and each line's damage increases by 1d12."
    ),
    savingThrow: "dex",
    sources: ["arcane"],
    group: "Elemental Torrent",
    tags: ["area"],
  },
  {
    name: "Lightning Pillar",
    level: 3,
    school: "transmutation",
    castingTime: "Action",
    range: "60 feet",
    area: "four 5-foot-radius, 10-foot-tall cylinders",
    duration: "1 minute",
    concentration: true,
    components: ["v", "s", "m"],
    material: "a handful of iron shavings, which the spell consumes",
    flavor: "Four menacing pillars materialize in a shower of sparks.",
    description: [
      "Four black structures appear in unoccupied spaces. They must be perfectly aligned to form a square whose sides are up to 30 feet long. Each structure has an Armor Class of 18 and 60 Hit Points.",
      "Upon casting the spell and as a Bonus Action on subsequent turns, you can trigger lightning to surge between the sides of the square created by the structures. All creatures touched by lightning must roll a Dexterity Saving Throw. On a failed save, they suffer 3d12 lightning damage, or half as much damage on a successful save.",
      "Lightning can't surge between two sides if a non-conductive obstacle is in the way.",
      "If a structure is destroyed, lightning can't surge towards that side of the square.",
    ],
    damageTypes: ["lightning"],
    atHigherLevels: forEachAboveDo(3, "the damage increases by 1d12."),
    savingThrow: "dex",
    sources: ["arcane"],
    group: "Elemental Torrent",
    tags: ["area"],
  },
  {
    name: "Frozen Cube",
    level: 3,
    school: "evocation",
    castingTime: "Action",
    range: "150 feet",
    area: "25-foot-width cube",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "a drop of water",
    flavor: "You create a cube of ice that explodes outward in a frigid blast.",
    description: [
      "On a hit, each creature takes 12d4 cold damage and has its Speeds halved until the start of your next turn. On a miss, each creature takes half as much damage and its Speeds aren't reduced.",
    ],
    damageTypes: ["cold"],
    atHigherLevels: forEachAboveDo(
      3,
      "the damage increases by 2d4 and the width of the cube increases by 5 feet."
    ),
    savingThrow: "con",
    sources: ["arcane"],
    group: "Elemental Torrent",
    tags: ["area"],
  },
  {
    name: "Slow",
    level: 3,
    school: "transmutation",
    castingTime: "Action",
    range: "120 feet",
    area: "40-foot cube",
    duration: "1 minute",
    concentration: true,
    components: ["v", "s", "m"],
    material: "a drop of molasses",
    flavor: "You alter time for a handful of unlucky creatures.",
    description: [
      "Up to six creatures of your choice are affected by the following effects:",
      "- They are Numb.",
      "- Their Speeds are halved.",
      "- It is Easy to hit them with Melee and Ranged Attacks.",
      "- It is Easy to hit them with Spellcasting Attempts if they are Melee, Ranged or have a Dexterity Saving Throw.",
      "- Their Dexterity Saving Throws become Hard.",
      "- If a creature attempts to cast a spell with a casting time of 1 Action, the GM rolls a d20. On an 11 or higher, the spell doesn't take effect until the creature's next turn, and the creature must use its Action on that turn to complete the spell. If it can't, the spell is wasted.",
      "An affected creature can roll a Wisdom Saving Throw at the end of each of its turns, ending the effect on itself on a success.",
    ],
    sources: ["arcane"],
    tags: ["area", "control", "debuff"],
    savingThrow: "wis",
  },
  {
    name: "Tempest",
    level: 3,
    school: "conjuration",
    castingTime: "Action",
    range: "Self",
    area: "60-foot-radius sphere",
    duration: "Instantaneous",
    components: ["v", "s", "m"],
    material: "a drum",
    flavor:
      "You conjure the fury of a tempest and surgically unleash it against your enemies.",
    description: [
      "On a hit, up to six creatures of your choice take 5d6 thunder damage and are pushed 15 feet away from you. On a miss, each creature takes half as much damage and isn't pushed.",
    ],
    damageTypes: ["thunder"],
    atHigherLevels: forEachAboveDo(
      3,
      "the damage increases by 1d6 and you can target two additional creatures."
    ),
    savingThrow: "con",
    sources: ["arcane", "primal"],
    group: "Elemental Torrent",
    tags: ["area", "control"],
  },
  {
    name: "Deadly Feast",
    level: 5,
    school: "necromancy",
    castingTime: "Action",
    range: "Self",
    area: "600-foot-radius sphere",
    duration: "24 hours",
    components: ["v", "s", "m"],
    material: "a flask of poison, that the spell consumes",
    flavor: "You bring death the fools that dare to eat spoiled meat.",
    description: [
      "All food and drinks become poisonous. A creature that ingests any of this poison must make a Constitution Saving Throw or take 10d10 poison damage, or half as much damage on a successful save.",
    ],
    atHigherLevels:
      "For each spell slot above 5th level, the area of effect increases by 600 feet.",
    savingThrow: "con",
    sources: ["arcane"],
    group: "Blighted Harvest",
    tags: ["area"],
    damageTypes: ["poison"],
    ritual: true,
  },
];
